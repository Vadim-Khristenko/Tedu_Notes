---
title: "–ü–∞—Ä–∞–ª–ª–µ–ª—å B<br>–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ: –ø–æ–ª–Ω—ã–π —Ä–∞–∑–±–æ—Ä"
timestamp: 2025-10-19T18:45:00+03:00
last_updated_timestamp: 2025-11-01T18:30:00+03:00
series: "T-–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ"
tags:
  - Tbank
  - Tgeneration
  - DynamicProgramming
  - DP
  - Optimization
description: >-
  –ü–æ–ª–Ω—ã–π –∫—É—Ä—Å –ø–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é: –æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á (–ù–û–ü, –ù–í–ü)
  –¥–æ —Å–ª–æ–∂–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ä—é–∫–∑–∞–∫–∞. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DP? –ö–∞–∫ –ø–µ—Ä–µ–π—Ç–∏ –æ—Ç –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏
  –∫ –∫–æ–¥—É? –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä—é–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.
---

<h2>–¢–µ–º–∞ –∫–æ–Ω—Å–ø–µ–∫—Ç–∞: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –æ—Ç –æ—Å–Ω–æ–≤ –∫ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤—É</h2>

> **–ì–ª–∞–≤–Ω—ã–π –∞–≤—Ç–æ—Ä:** –í–∞–¥–∏–º –•—Ä–∏—Å—Ç–µ–Ω–∫–æ  
> **–î—Ä—É–≥–∏–µ –∞–≤—Ç–æ—Ä—ã:** ‚Äî  
> **–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-01  
> **–°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ:** https://github.com/Vadim-Khristenko/Tedu_Notes/discussions/2  
> _–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:_ –ö–æ–Ω—Å–ø–µ–∫—Ç —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞, –ø–æ—à–∞–≥–æ–≤—ã–º–∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏ –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏. –î–ª—è —Ç–µ—Ö, –∫—Ç–æ —É–∂–µ –Ω–µ–º–Ω–æ–≥–æ –∑–Ω–∞–µ—Ç, –Ω–æ —Ö–æ—á–µ—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –Ω–∞–∫–æ–Ω–µ—Ü.  
> _–¢–µ–≥–∏:_ DP, Dynamic Programming, Optimization, –ù–û–ü, –ù–í–ü, Knapsack

---

# –í–≤–µ–¥–µ–Ω–∏–µ {id: "introduction"}

## –ß—Ç–æ —Ç–∞–∫–æ–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ? {id: "introduction-dp"}

**–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (DP)** ‚Äî —ç—Ç–æ –Ω–µ –º–∞–≥–∏—è, –∞ –ø—Ä–æ—Å—Ç–æ —Å–ø–æ—Å–æ–± **—ç–∫–æ–Ω–æ–º–∏—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –∑–∞–ø–æ–º–∏–Ω–∞—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–¥–∑–∞–¥–∞—á**. –≠—Ç–æ —Ç–µ—Ö–Ω–∏–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç, –∫–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞ –æ–±–ª–∞–¥–∞–µ—Ç –¥–≤—É–º—è –∫–ª—é—á–µ–≤—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

1. **–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –ø–æ–¥—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** ‚Äî –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –ø–æ–¥–∑–∞–¥–∞—á.
2. **–ü–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è –ø–æ–¥–∑–∞–¥–∞—á–∏** ‚Äî –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ —Ä–µ—à–∞—é—Ç—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ.

### –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑ DP {id: "dp-intro-fib-naive"}

–ü–æ—Å—á–∏—Ç–∞–µ–º $n$-–π —ç–ª–µ–º–µ–Ω—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –§–∏–±–æ–Ω–∞—á—á–∏ –Ω–∞–∏–≤–Ω–æ:

```just-ncv
func fib_naive(n: int32) -> int64:
    if n <= 1:
        return n
    return fib_naive(n-1) + fib_naive(n-2)
```

–î–µ—Ä–µ–≤–æ –≤—ã–∑–æ–≤–æ–≤ –¥–ª—è $n=5$:

```mermaid
graph TD
    A["fib(5)"] --> B["fib(4)"]
    A --> C["fib(3)"]
    B --> D["fib(3)"]
    B --> E["fib(2)"]
    C --> F["fib(2)"]
    C --> G["fib(1)"]
    D --> H["..."]
    E --> I["..."]
    F --> J["..."]
    G --> K["1"]
    
    style D fill:red
    style E fill:red
    style F fill:red
    style G fill:green
```

–í–∏–¥–∏–º, —á—Ç–æ $fib(3)$, $fib(2)$ —Å—á–∏—Ç–∞—é—Ç—Å—è **–º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ**! –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ $O(2^n)$.

#### –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –Ω–∞–∏–≤–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ {id: "dp-intro-fib-naive-complexity"}

| n | –í—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ | –í—Ä–µ–º—è –Ω–∞ –ü–ö (‚âà) | –ü—Ä–æ–±–ª–µ–º–∞ |
|---|---|---|---|
| 10 | $2^{10} = 1024$ | < 1 –º—Å | –ù–æ—Ä–º–∞–ª—å–Ω–æ |
| 20 | $2^{20} \approx 10^6$ | 1 –º—Å | –í—Å—ë –µ—â—ë –±—ã—Å—Ç—Ä–æ |
| 30 | $2^{30} \approx 10^9$ | 1 —Å–µ–∫ | –ù–∞—á–∏–Ω–∞–µ—Ç –º–µ–¥–ª–∏—Ç—å |
| 40 | $2^{40} \approx 10^{12}$ | 1000 —Å–µ–∫ | **–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ!** |
| 50 | $2^{50} \approx 10^{15}$ | –ß–∞—Å—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏–π | üî• |

**–ì—Ä–∞—Ñ–∏–∫ —Ä–æ—Å—Ç–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:**

```mermaid
graph LR
    A["–ù–∞–∏–≤–Ω—ã–π fib<br/>O(2^n)"] -->|—ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç| B["‚ö†Ô∏è –ù–µ–ø—Ä–∏–µ–º–ª–µ–º–æ"]
    C["DP fib<br/>O(n)"] -->|–ª–∏–Ω–µ–π–Ω—ã–π —Ä–æ—Å—Ç| D["‚úì –ü—Ä–∏–µ–º–ª–µ–º–æ"]
    
    style A fill:red
    style B fill:red
    style C fill:lime
    style D fill:lime
```

### –†–µ—à–µ–Ω–∏–µ —Å DP {id: "dp-intro-fib-dp-solution"}

```just-ncv
func fib_dp(n: int32) -> int64:
    if n <= 1:
        return n
    
    dp = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (n+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    dp[0] = 0
    dp[1] = 1
    
    for i in 2..n:
        dp[i] = dp[i-1] + dp[i-2]
    
    return dp[n]
```

–ö–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑** ‚Üí —Å–ª–æ–∂–Ω–æ—Å—Ç—å $O(n)$, –ø–∞–º—è—Ç—å $O(n)$.

> üí° **–ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è:** –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ, –≤—ã—á–∏—Å–ª–∏–º –æ–¥–∏–Ω —Ä–∞–∑ –∏ —Å–æ—Ö—Ä–∞–Ω–∏–º –≤ —Ç–∞–±–ª–∏—Ü—É.

---

## –î–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –∫ DP {id: "dp-two-approaches"}

### –ü–æ–¥—Ö–æ–¥ 1: Memoization (—Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑) {id: "dp-memoization"}

–ü–∏—à–µ–º —Ä–µ–∫—É—Ä—Å–∏—é, –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –∫—ç—à (—Å–ª–æ–≤–∞—Ä—å/–º–∞—Å—Å–∏–≤).

```just-ncv
memo = {}  # –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫—ç—à

func fib_memo(n: int32) -> int64:
    if n in memo:
        return memo[n]
    
    if n <= 1:
        return n
    
    result = fib_memo(n-1) + fib_memo(n-2)
    memo[n] = result
    return result
```

**–ü—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Memoization –¥–ª—è fib(5):**

```mermaid
graph TD
    A["fib(5)"] --> B["fib(4) ‚ùå –∫—ç—à –ø—É—Å—Ç"]
    A --> C["fib(3) ‚ùå –∫—ç—à –ø—É—Å—Ç"]
    B --> D["fib(3) ‚úì –≤ –∫—ç—à–µ!"]
    B --> E["fib(2) ‚ùå –∫—ç—à –ø—É—Å—Ç"]
    C --> F["fib(2) ‚úì –≤ –∫—ç—à–µ!"]
    C --> G["fib(1) ‚úì –±–∞–∑–æ–≤—ã–π"]
    
    style D fill:lime
    style F fill:lime
    style G fill:lime
    style B fill:cyan
    style A fill:blue
```

**–ü–ª—é—Å—ã:** 
- ‚úÖ –ö–æ–¥ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Ä–µ–∫—É—Ä—Å–∏—è, –∏–Ω—Ç—É–∏—Ç–∏–≤–µ–Ω
- ‚úÖ –í—ã—á–∏—Å–ª—è–µ–º —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ (–ª–µ–Ω–∏–≤–æ)

**–ú–∏–Ω—É—Å—ã:** 
- ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ –∏–∑-–∑–∞ –≥–ª—É–±–æ–∫–æ–π —Ä–µ–∫—É—Ä—Å–∏–∏ ($O(n)$ –Ω–∞ —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤)
- ‚ùå –†–∏—Å–∫ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ç–µ–∫–∞ –ø—Ä–∏ –±–æ–ª—å—à–æ–º $n$

### –ü–æ–¥—Ö–æ–¥ 2: Tabulation (—Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö) {id: "dp-tabulation"}

–Ø–≤–Ω–æ —Å—Ç—Ä–æ–∏–º —Ç–∞–±–ª–∏—Ü—É, –∑–∞–ø–æ–ª–Ω—è—è —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö (–æ—Ç –º–∞–ª—ã—Ö –∫ –±–æ–ª—å—à–∏–º).

```just-ncv
func fib_tab(n: int32) -> int64:
    dp = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (n+1)
    dp[0] = 0
    dp[1] = 1
    
    for i in 2..n:
        dp[i] = dp[i-1] + dp[i-2]
    
    return dp[n]
```

**–ü—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Tabulation –¥–ª—è fib(5):**

```mermaid
graph LR
    A["dp[0]=0"] --> B["dp[1]=1"]
    B --> C["dp[2]=1"]
    C --> D["dp[3]=2"]
    D --> E["dp[4]=3"]
    E --> F["dp[5]=5"]
    
    style A fill:yellow
    style B fill:yellow
    style C fill:lime
    style D fill:lime
    style E fill:cyan
    style F fill:blue
```

**–ü–ª—é—Å—ã:** 
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å (–±–µ–∑ —Ä–µ–∫—É—Ä—Å–∏–∏)
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ (–Ω–µ—Ç overhead –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π)
- ‚úÖ –ú–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏ –Ω–∞ —Å—Ç–µ–∫

**–ú–∏–Ω—É—Å—ã:** 
- ‚ùå –ù—É–∂–Ω–æ –ø—Ä–æ–¥—É–º–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚ùå –í—ã—á–∏—Å–ª—è–µ–º –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –Ω–µ –≤—Å–µ

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤ {id: "dp-comparison"}

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Memoization | Tabulation |
|----------|---|---|
| **–¢–∏–ø** | –°–≤–µ—Ä—Ö—É –≤–Ω–∏–∑ | –°–Ω–∏–∑—É –≤–≤–µ—Ä—Ö |
| **–†–µ–∫—É—Ä—Å–∏—è** | –î–∞ | –ù–µ—Ç |
| **–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è** | –°—Ä–∞–∑—É –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é | –í—Å–µ —Å—Ä–∞–∑—É |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | $O(n)$ | $O(n)$ |
| **–î–æ–ø. –ø–∞–º—è—Ç—å** | $O(n)$ –Ω–∞ —Å—Ç–µ–∫ | $O(1)$ –Ω–∞ —Å—Ç–µ–∫ |
| **–õ–µ–≥—á–µ –ø–∏—Å–∞—Ç—å** | –î–∞ ‚úÖ | –ù–µ—Ç |
| **–ë—ã—Å—Ç—Ä–µ–µ** | –ù–µ—Ç | –î–∞ ‚úÖ |
| **–ö–æ–≥–¥–∞ –≤—ã–±—Ä–∞—Ç—å** | –ü—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏–µ | Production |

---

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DP? {id: "dp-when-to-use"}

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DP, –µ—Å–ª–∏:**
- –ó–∞–¥–∞—á–∞ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ **–ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è –ø–æ–¥–∑–∞–¥–∞—á–∏** (–∏–Ω–∞—á–µ –ø—Ä–æ—â–µ —Ä–∞–∑–¥–µ–ª—è–π –∏ –≤–ª–∞—Å—Ç–≤—É–π).
- –ï—Å—Ç—å **–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –ø–æ–¥—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** (—Ä–µ—à–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ—à–µ–Ω–∏—è –ø–æ–¥–∑–∞–¥–∞—á).
- –ú–æ–∂–Ω–æ –≤—ã—Ä–∞–∑–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ (N, –Ω–µ —Å–æ—Ç–Ω–∏).

**–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ DP, –µ—Å–ª–∏:**
- –ü–æ–¥–∑–∞–¥–∞—á–∏ –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç—Å—è (–ø—Ä–∏–º–µ—Ä—ã: –±–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫, —Å–ª–∏—è–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ–∫).
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –≤ –ø–∞–º—è—Ç–∏.
- –ù—É–∂–Ω–∞ —Ä–µ–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ—Å—Ç—å, –∞ –Ω–µ —ç–≤—Ä–∏—Å—Ç–∏–∫–∞.

### –ö–æ–≥–¥–∞ DP –º–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º –Ω—É–∂–Ω–æ? {id: "dp-when-dp-too-slow"}

```mermaid
graph LR
    A["DP —Ä–µ—à–µ–Ω–∏–µ<br/>—Ä–∞–±–æ—Ç–∞–µ—Ç<br/>–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–æ"] --> B{–ö–∞–∫–∞—è<br/>—Å–ª–æ–∂–Ω–æ—Å—Ç—å?}
    
    B -->|"O(N^2 * M^2)"| C["–ü–æ–ø—Ä–æ–±—É–π<br/>–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é<br/>–ø–∞–º—è—Ç–∏"]
    B -->|"O(2^N)"| D["N –Ω–µ –±–æ–ª—å—à–µ 20?"]
    B -->|"O(N * M * logN)"| E["–°–ª–∏—à–∫–æ–º<br/>–º–µ–¥–ª–µ–Ω–Ω–æ?"]

    D -->|–î–∞| F["–ù–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è<br/>Bitmask DP"]
    D -->|–ù–µ—Ç| G["–ù—É–∂–Ω–∞ –¥—Ä—É–≥–∞—è<br/>–∏–¥–µ—è"]
    
    C --> H["–ò—Å–ø–æ–ª—å–∑—É–π<br/>—Ç–æ–ª—å–∫–æ 2 —Å—Ç—Ä–æ–∫–∏<br/>–≤–º–µ—Å—Ç–æ N –Ω–∞ M"]
    E --> I["–ú–æ–∂–µ—Ç –±—ã—Ç—å<br/>–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø–ª–æ—Ö–æ<br/>–ü–æ–ø—Ä–æ–±—É–π C++"]
    
    style H fill:lime
    style F fill:lime
```

### –¢–∞–±–ª–∏—Ü–∞: –ö–æ–≥–¥–∞ –∫–∞–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–∞ {id: "dp-complexity-table"}

| –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í—Ä–µ–º—è | $N = 10$ | $N = 100$ | $N = 1000$ | $N = 10^6$ | –ü—Ä–∏–º–µ—Ä—ã |
|-----------|-------|----------|----------|-----------|-----------|---------|
| $O(N)$ | < 1 –º–∫—Å | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | –õ–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫, –ø—Ä–µ—Ñ–∏–∫—Å–Ω—ã–µ —Å—É–º–º—ã |
| $O(N \log N)$ | < 1 –º–∫—Å | ‚úÖ | ‚úÖ | ‚úÖ | ‚ö†Ô∏è | –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –ù–í–ü O(N log N) |
| $O(N^2)$ | < 1 –º—Å | ‚úÖ | ‚úÖ | ‚ö†Ô∏è | ‚ùå | –ù–û–ü, –ù–í–ü O(N¬≤) |
| $O(N^3)$ | 1 –º—Å | ‚úÖ | ‚ö†Ô∏è | ‚ùå | ‚ùå | –ú–∞—Ç—Ä–∏—á–Ω–æ–µ —É–º–Ω–æ–∂–µ–Ω–∏–µ |
| $O(NM)$ | 1 –º—Å | ‚úÖ | ‚ö†Ô∏è | ‚ùå | ‚ùå | –ù–û–ü, Edit Distance |
| $O(2^N)$ | 1 –º—Å | ‚úÖ | ‚ùå | ‚ùå | ‚ùå | Bitmask DP –ø—Ä–∏ $N \leq 20$ |
| $O(N!)$ | 1 –º—Å | ‚ö†Ô∏è | ‚ùå | ‚ùå | ‚ùå | –ü–µ—Ä–µ–±–æ—Ä –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–æ–∫ |

---

## –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è DP –∑–∞–¥–∞—á {id: "dp-classification"}

| –¢–∏–ø | –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ü—Ä–∏–º–µ—Ä—ã |
|-----|--|--|
| **–ü–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** | –£—á–∏—Ç—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ª–∏–Ω–µ–π–Ω–æ | –ù–û–ü, –ù–í–ü, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è |
| **–ü–æ –ø–æ–¥–º–∞—Ç—Ä–∏—Ü–µ** | –†–∞–±–æ—Ç–∞–µ–º —Å 2D —Ç–∞–±–ª–∏—Ü–µ–π (substring/subarray) | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–æ–¥–º–∞—Ç—Ä–∏—Ü–∞, —Ä—é–∫–∑–∞–∫ |
| **–ü–æ –¥–µ—Ä–µ–≤—É** | –û–±—Ö–æ–¥–∏–º –¥–µ—Ä–µ–≤–æ, –≤—ã—á–∏—Å–ª—è—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–µ–≤—å–µ–≤ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—É—Ç—å –±–µ–∑ —Å–æ—Å–µ–¥–µ–π, –¥–∏–∞–º–µ—Ç—Ä |
| **–ü–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º** | –†–∞–∑–±–∏–≤–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª –Ω–∞ —á–∞—Å—Ç–∏ | –ü–µ—Ä–µ–º–Ω–æ–∂–µ–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü, –ø–∞–ª–∏–Ω–¥—Ä–æ–º–Ω—ã–µ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏ |
| **–ß–µ—Ä–µ–∑ –≥—Ä–∞—Ñ** | DP –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö –≥—Ä–∞—Ñ–∞ | –ö—Ä–∞—Ç—á–∞–π—à–∏–π –ø—É—Ç—å, –∫–æ–º–º–∏–≤–æ—è–∂–µ—Ä |

---

## –°–æ–≤–µ—Ç: –∫–∞–∫ —Ä–µ—à–∞—Ç—å DP –∑–∞–¥–∞—á—É? {id: "dp-how-to-solve"}

1. **–û–ø—Ä–µ–¥–µ–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** —á—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å? (–Ω–∞–ø—Ä–∏–º–µ—Ä, `dp[i][j]` = –æ—Ç–≤–µ—Ç –¥–ª—è –ø–µ—Ä–≤—ã—Ö i —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ç—Ä–æ–∫–∏ A –∏ –ø–µ—Ä–≤—ã—Ö j —Å—Ç—Ä–æ–∫–∏ B)
2. **–ù–∞–ø–∏—à–∏ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ:** –∫–∞–∫ –≤—ã—á–∏—Å–ª–∏—Ç—å `dp[i][j]` —á–µ—Ä–µ–∑ –º–µ–Ω—å—à–∏–µ –ø–æ–¥–∑–∞–¥–∞—á–∏?
3. **–û–ø—Ä–µ–¥–µ–ª–∏ –±–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π:** –¥–ª—è –∫–∞–∫–∏—Ö –º–∞–ª—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –æ—Ç–≤–µ—Ç –æ—á–µ–≤–∏–¥–µ–Ω?
4. **–í—ã–±–µ—Ä–∏ –ø–æ—Ä—è–¥–æ–∫ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π:** —Ç–∞–±—É–ª—è—Ü–∏—è (—Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö) –∏–ª–∏ –º–µ–º–æ–∏–∑–∞—Ü–∏—è (—Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑)?
5. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π:** –º–æ–∂–Ω–æ –ª–∏ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –ø–∞–º—è—Ç—å –∏–ª–∏ –≤—Ä–µ–º—è?

### –°—Ö–µ–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–µ—à–µ–Ω–∏—è DP {id: "dp-solution-flowchart"}

```mermaid
graph TD
    A["üìñ –ü—Ä–æ—á–∏—Ç–∞–π –∑–∞–¥–∞—á—É"] --> B["ü§î –û–ø—Ä–µ–¥–µ–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ<br/>dp[—á—Ç–æ?]"]
    B --> C["üìê –ù–∞–ø–∏—à–∏ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ<br/>dp[i] = ?"]
    C --> D["‚öôÔ∏è –ë–∞–∑–æ–≤—ã–µ —Å–ª—É—á–∞–∏<br/>dp[0], dp[1], ..."]
    D --> E{–ö–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥?}
    E -->|–ü—Ä–æ—â–µ| F["üìù Memoization<br/>—Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑"]
    E -->|–ë—ã—Å—Ç—Ä–µ–µ| G["üìã Tabulation<br/>—Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö"]
    F --> H["‚úÖ –†–µ–∞–ª–∏–∑—É–π –∏ —Ç–µ—Å—Ç–∏—Ä—É–π"]
    G --> H
    H --> I{–†–∞–±–æ—Ç–∞–µ—Ç?}
    I -->|–ù–µ—Ç| J["üêõ –û—Ç–ª–∞–¥—å –Ω–∞ –º–∞–ª—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö"]
    I -->|–î–∞| K["‚ö° –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –µ—Å–ª–∏ –Ω—É–∂–Ω–æ"]
    J --> A
    K --> L["üéâ –ì–æ—Ç–æ–≤–æ!"]
    
    style A fill:blue
    style B fill:cyan
    style C fill:cyan
    style D fill:cyan
    style E fill:yellow
    style F fill:purple
    style G fill:purple
    style H fill:lime
    style I fill:yellow
    style J fill:orange
    style K fill:lime
    style L fill:green
```

---

# –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ {id: "contents"}

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#introduction)
   - –ß—Ç–æ —Ç–∞–∫–æ–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ?
   - –î–≤–∞ –ø–æ–¥—Ö–æ–¥–∞: Memoization –∏ Tabulation
   - –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DP?
   - –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–¥–∞—á DP
   - –ö–∞–∫ —Ä–µ—à–∞—Ç—å DP –∑–∞–¥–∞—á—É?

2. [–î–µ—Ä–µ–≤–æ —Ä–µ—à–µ–Ω–∏–π: –∫–∞–∫—É—é DP –≤—ã–±—Ä–∞—Ç—å](#decision-tree)
   - –°—Ö–µ–º–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ DP

3. [DP –ø–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º](#dp-by-substring)
   - [–ù–∞–∏–±–æ–ª—å—à–∞—è –æ–±—â–∞—è –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ù–û–ü)](#lcs)
     - –ò–Ω—Ç—É–∏—Ü–∏—è –∏ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ
     - –ü—Ä–∏–º–µ—Ä —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
     - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è (—Ç–∞–±—É–ª—è—Ü–∏—è –∏ –º–µ–º–æ–∏–∑–∞—Ü–∏—è)
     - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è
     - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏
   - [–ù–∞–∏–±–æ–ª—å—à–∞—è –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∞—è –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ù–í–ü)](#lis)
     - –ü–æ–¥—Ö–æ–¥ O(n¬≤)
     - –ü–æ–¥—Ö–æ–¥ O(n log n) —Å –±–∏–Ω–∞—Ä–Ω—ã–º –ø–æ–∏—Å–∫–æ–º
     - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ù–í–ü

4. [–†—é–∫–∑–∞–∫ (Knapsack)](#knapsack)
   - [0-1 –†—é–∫–∑–∞–∫](#knapsack-0-1)
     - –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∏–Ω—Ç—É–∏—Ü–∏—è
     - –ü—Ä–∏–º–µ—Ä —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
     - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è O(nW)
     - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏
     - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è
   - [–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä—é–∫–∑–∞–∫](#knapsack-unbounded)
   - [–†—é–∫–∑–∞–∫ —Å–æ —Å—á—ë—Ç–æ–º —Å–ø–æ—Å–æ–±–æ–≤](#knapsack-counting)
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

5. [DP –ø–æ –¥–µ—Ä–µ–≤—å—è–º](#dp-by-subtree)
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å –ø—É—Ç–∏ –±–µ–∑ —Å–æ—Å–µ–¥–Ω–∏—Ö —É–∑–ª–æ–≤
   - –î–∏–∞–º–µ—Ç—Ä –¥–µ—Ä–µ–≤–∞
   - –î—Ä—É–≥–∏–µ –ø—Ä–∏–º–µ—Ä—ã

6. [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ —Ç—Ä—é–∫–∏](#optimizations)
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ (Swapping)
   - –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è
   - –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è DP
   - Parallelization
   - Convex Hull Trick
   - –ú–∞—Ç—Ä–∏—á–Ω–æ–µ –≤–æ–∑–≤–µ–¥–µ–Ω–∏–µ –≤ —Å—Ç–µ–ø–µ–Ω—å

7. [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã](#practical-examples)
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è (Edit Distance)
   - –ó–∞–¥–∞—á–∞ –∫–æ–º–º–∏–≤–æ—è–∂–µ—Ä–∞ (TSP + Bitmask)
   - –ü–∞–ª–∏–Ω–¥—Ä–æ–º–Ω–∞—è –ø–æ–¥—Å—Ç—Ä–æ–∫–∞

8. [–ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏](#mistakes)
   - –ü—Ä–æ—Ö–æ–¥ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ (—Ä—é–∫–∑–∞–∫)
   - –ù–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è DP
   - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –±–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π
   - –°–º–µ—à–∏–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
   - –¢–∞–±–ª–∏—Ü–∞ —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫

9. [DP –®–ø–∞—Ä–≥–∞–ª–∫–∞: –±—ã—Å—Ç—Ä—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã](#cheatsheet)
   - –®–∞–±–ª–æ–Ω—ã –∫–æ–¥–∞ DP
   - –¢–∞–±–ª–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
   - –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ –∫–∞–∫ –∏—Ö –∏–∑–±–µ–∂–∞—Ç—å
   - –ë—ã—Å—Ç—Ä—ã–µ —Å–æ–≤–µ—Ç—ã –Ω–∞ –∫–æ–Ω–∫—É—Ä—Å–µ

10. [–°–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#tips)
   - –ù–∞—á–Ω–∏—Ç–µ —Å –Ω–∞–∏–≤–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
   - –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –º–∞–ª—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö
   - –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞
   - –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤

11. [–ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#conclusion)

---

# –î–µ—Ä–µ–≤–æ —Ä–µ—à–µ–Ω–∏–π: –∫–∞–∫—É—é DP –≤—ã–±—Ä–∞—Ç—å {id: "decision-tree"}

–ü–æ—Ç–µ—Ä—è–µ—à—å—Å—è –≤ —Ç–∏–ø–∞—Ö DP? –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç—É —Å—Ö–µ–º—É –≤—ã–±–æ—Ä–∞:

```mermaid
graph TD
    A["üìä –ü—Ä–æ—á–∏—Ç–∞–π –∑–∞–¥–∞—á—É"] --> B{–ö–∞–∫–∞—è<br/>—Å—Ç—Ä—É–∫—Ç—É—Ä–∞<br/>–¥–∞–Ω–Ω—ã—Ö?}
    
    B -->|–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å<br/>—Å—Ç—Ä–æ–∫–∏/–º–∞—Å—Å–∏–≤—ã| C{–ö–∞–∫–∞—è<br/>–æ–ø–µ—Ä–∞—Ü–∏—è?}
    B -->|–î–µ—Ä–µ–≤–æ<br/>–≥—Ä–∞—Ñ| D["–ü–æ–ø—Ä–æ–±—É–π DP –Ω–∞<br/>–ø–æ–¥–¥–µ—Ä–µ–≤—å—è—Ö –∏–ª–∏<br/>–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö –≥—Ä–∞—Ñ–∞"]
    B -->|–ú–∞—Ç—Ä–∏—Ü–∞<br/>–ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ| E{–ú–Ω–æ–≥–æ –ª–∏<br/>–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤?}
    
    C -->|–û–±—â–∞—è<br/>–ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤.| F["üéØ –ù–û–ü<br/>O(NM)"]
    C -->|–í–æ–∑—Ä–∞—Å—Ç–∞—é—â–∞—è<br/>–ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤.| G["üéØ –ù–í–ü<br/>O(N log N)"]
    C -->|–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ<br/>—Ä–µ–¥–∞–∫—Ç–∏—Ä.| H["üéØ Edit Distance<br/>O(NM)"]
    
    E -->|–î–∞ N –º–µ–Ω—å—à–µ 20| I["üéØ Bitmask DP<br/>O(2^N * N^2)"]
    E -->|–ù–µ—Ç, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ| J["üéØ –†—é–∫–∑–∞–∫<br/>O(NW)"]
    
    D -->|–í—ã–±—Ä–∞—Ç—å<br/>–ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ| K["üéØ DP –Ω–∞ –¥–µ—Ä–µ–≤—å—è—Ö<br/>O(N)"]
    D -->|–ö—Ä–∞—Ç—á–∞–π—à–∏–π –ø—É—Ç—å| L["üéØ –ë–µ–ª–ª–º–∞–Ω-–§–æ—Ä–¥<br/>–∏–ª–∏ SPFA"]
    
    F --> M["‚úÖ –ó–∞–ø–æ–ª–Ω–∏ —Ç–∞–±–ª–∏—Ü—É<br/>–ø–æ DP[i-1][j], DP[i][j-1]"]
    G --> M
    H --> M
    
    I --> N["‚úÖ –î–ª—è –∫–∞–∂–¥–æ–π –º–∞—Å–∫–∏<br/>–ø–µ—Ä–µ—Ö–æ–¥–∏ –≤ —Å–º–µ–∂–Ω—ã–µ"]
    J --> N
    
    K --> O["‚úÖ DFS —Å DP<br/>–≤–≤–µ—Ä—Ö –ø–æ –¥–µ—Ä–µ–≤—É"]
    L --> O
    
    style A fill:blue
    style F fill:lime
    style G fill:lime
    style H fill:lime
    style I fill:cyan
    style J fill:cyan
    style K fill:purple
    style L fill:purple
    style M fill:yellow
    style N fill:yellow
    style O fill:yellow
```

---

# DP –ø–æ –ø–æ–¥–æ—Ç—Ä–µ–∑–∫–∞–º {id: "dp-by-substring"}

–°–∞–º—ã–π —á–∞—Å—Ç—ã–π —Å–ª—É—á–∞–π: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π —Å—Ç—Ä–æ–∫/–º–∞—Å—Å–∏–≤–æ–≤.

## –ù–∞–∏–±–æ–ª—å—à–∞—è –æ–±—â–∞—è –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ù–û–ü) {id: "lcs"}

### –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏ {id: "lcs-problem-statement"}

–î–∞–Ω—ã –¥–≤–µ —Å—Ç—Ä–æ–∫–∏ $A$ –∏ $B$. –ù–∞–π—Ç–∏ **–¥–ª–∏–Ω—É –Ω–∞–∏–±–æ–ª—å—à–µ–π –æ–±—â–µ–π –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–º–µ–∂–Ω–æ–π).

**–ü—Ä–∏–º–µ—Ä—ã:**
- $A = \text{"ABCD"}$, $B = \text{"ACD"}$ ‚Üí –ù–û–ü = $\text{"ACD"}$ (–¥–ª–∏–Ω–∞ 3)
- $A = \text{"AGGTAB"}$, $B = \text{"GXTXAYB"}$ ‚Üí –ù–û–ü = $\text{"GTAB"}$ (–¥–ª–∏–Ω–∞ 4)
- $A = \text{"ABC"}$, $B = \text{"DEF"}$ ‚Üí –ù–û–ü = "" (–¥–ª–∏–Ω–∞ 0)

### –ò–Ω—Ç—É–∏—Ü–∏—è –∏ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ {id: "lcs-recursion"}

–û–ø—Ä–µ–¥–µ–ª–∏–º $dp[i][j]$ = **–¥–ª–∏–Ω–∞ –ù–û–ü –ø–µ—Ä–≤—ã—Ö $i$ —Å–∏–º–≤–æ–ª–æ–≤ $A$ –∏ –ø–µ—Ä–≤—ã—Ö $j$ —Å–∏–º–≤–æ–ª–æ–≤ $B$**.

**–ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è:** –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–∏–º–≤–æ–ª–µ –µ—Å—Ç—å –¥–≤–∞ –≤—ã–±–æ—Ä–∞:

```mermaid
graph TD
    A["–°—Ä–∞–≤–Ω–∏–≤–∞–µ–º<br/>A[i-1] –∏ B[j-1]"]
    A --> B{–†–∞–≤–Ω—ã –ª–∏?}
    B -->|–î–ê| C["‚úÖ –í–∫–ª—é—á–∞–µ–º –≤ –ù–û–ü<br/>dp[i][j] = dp[i-1][j-1] + 1<br/><br/>–û–±–∞ —Å–∏–º–≤–æ–ª–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç,<br/>–¥–æ–±–∞–≤–ª—è–µ–º –∫ –ù–û–ü"]
    B -->|–ù–ï–¢| D["‚ùå –û–¥–∏–Ω –Ω–µ –≤—Ö–æ–¥–∏—Ç<br/>dp[i][j] = max<br/>&nbsp;&nbsp;&nbsp;dp[i-1][j] –∏–ª–∏<br/>&nbsp;&nbsp;&nbsp;dp[i][j-1]<br/><br/>–í—ã–±–∏—Ä–∞–µ–º –ª—É—á—à–∏–π –ø—É—Ç—å"]
    
    style C fill:lime
    style D fill:orange
    style A fill:cyan
```

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –¥–≤–∞ —Å–ª—É—á–∞—è:

**–°–ª—É—á–∞–π 1:** $A[i-1] = B[j-1]$ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç)  
‚Üí —ç—Ç–∏ —Å–∏–º–≤–æ–ª—ã –≤—Ö–æ–¥—è—Ç –≤ –ù–û–ü  
‚Üí $dp[i][j] = dp[i-1][j-1] + 1$

**–°–ª—É—á–∞–π 2:** $A[i-1] \neq B[j-1]$ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç)  
‚Üí –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ –ù–û–ü  
‚Üí $dp[i][j] = \max(dp[i-1][j], dp[i][j-1])$

**–ë–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π:** –µ—Å–ª–∏ –æ–¥–Ω–∞ –∏–∑ —Å—Ç—Ä–æ–∫ –ø—É—Å—Ç–∞, –ù–û–ü = 0.

$$
dp[i][j] = \begin{cases}
0 & \text{–µ—Å–ª–∏ } i=0 \text{ –∏–ª–∏ } j=0 \\
dp[i-1][j-1] + 1 & \text{–µ—Å–ª–∏ } A[i-1] = B[j-1] \\
\max(dp[i-1][j], dp[i][j-1]) & \text{–∏–Ω–∞—á–µ}
\end{cases}
$$

### –ü—Ä–∏–º–µ—Ä —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ {id: "lcs-trace-example"}

–°—Ç—Ä–æ–∫–∏: $A = \text{"ABC"}$, $B = \text{"AC"}$

| i\j | 0 | 1(A) | 2(C) |
|-----|---|------|------|
| 0   | 0 | 0    | 0    |
| 1(A)| 0 | **1**| 1    |
| 2(B)| 0 | 1    | 1    |
| 3(C)| 0 | 1    | **2**|

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è:**

```mermaid
graph TD
    S["–ù–∞—á–∞–ª–æ: –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏<br/>dp[0][*] = 0, dp[*][0] = 0"]
    A1["–®–∞–≥ 1: A[0]=B[0]='A'<br/>dp[1][1] = dp[0][0] + 1 = 1"] 
    A2["–®–∞–≥ 2: A[0]‚â†B[1]='C'<br/>dp[1][2] = max(dp[0][2], dp[1][1]) = 1"]
    B1["–®–∞–≥ 3: A[1]='B'‚â†B[0]='A'<br/>dp[2][1] = max(dp[1][1], dp[2][0]) = 1"]
    B2["–®–∞–≥ 4: A[1]='B'‚â†B[1]='C'<br/>dp[2][2] = max(dp[1][2], dp[2][1]) = 1"]
    C2["–®–∞–≥ 5: A[2]='C'=B[1]='C' ‚úì<br/>dp[3][2] = dp[2][1] + 1 = 2 üéØ"]
    
    S --> A1 --> A2 --> B1 --> B2 --> C2
    
    style S fill:yellow
    style A1 fill:cyan
    style A2 fill:cyan
    style B1 fill:cyan
    style B2 fill:cyan
    style C2 fill:lime
```

**–ü–æ—à–∞–≥–æ–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- $(0, j)$ –∏ $(i, 0)$ = 0 (–±–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π) ‚Äî –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
- $(1, 1)$: $A[0]=B[0]='A'$ ‚Üí **—Å–æ–≤–ø–∞–¥–∞—é—Ç** ‚Üí $dp[0][0] + 1 = 1$
- $(1, 2)$: $A[0]='A' \neq B[1]='C'$ ‚Üí **–Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç** ‚Üí $\max(dp[0][2], dp[1][1]) = \max(0, 1) = 1$
- $(2, 1)$: $A[1]='B' \neq B[0]='A'$ ‚Üí **–Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç** ‚Üí $\max(dp[1][1], dp[2][0]) = \max(1, 0) = 1$
- $(2, 2)$: $A[1]='B' \neq B[1]='C'$ ‚Üí **–Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç** ‚Üí $\max(dp[1][2], dp[2][1]) = \max(1, 1) = 1$
- $(3, 2)$: $A[2]='C' = B[1]='C'$ ‚Üí **—Å–æ–≤–ø–∞–¥–∞—é—Ç!** ‚Üí $dp[2][1] + 1 = 1 + 1 = 2$ ‚úì

**–û—Ç–≤–µ—Ç:** $dp[3][2] = 2$ (–ù–û–ü = "AC")

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî –¢–∞–±—É–ª—è—Ü–∏—è (—Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö) {id: "lcs-tabulation"}

```just-ncv
func lcs(A: str, B: str) -> int32:
    n = len(A)
    m = len(B)
    
    # dp[i][j] = –ù–û–ü –¥–ª—è A[0..i-1] –∏ B[0..j-1]
    dp = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (n+1) √ó (m+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    
    # –ë–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π: dp[0][j] = 0, dp[i][0] = 0 (—É–∂–µ –µ—Å—Ç—å)
    
    # –ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–∞–±–ª–∏—Ü—É
    for i in 1..n:
        for j in 1..m:
            if A[i-1] == B[j-1]:
                # –°–∏–º–≤–æ–ª—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç
                dp[i][j] = dp[i-1][j-1] + 1
            else:
                # –°–∏–º–≤–æ–ª—ã –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç ‚Äî –±–µ—Ä—ë–º –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                dp[i][j] = max(dp[i-1][j], dp[i][j-1])
    
    return dp[n][m]

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
result = lcs("ABCD", "ACD")  # –í–µ—Ä–Ω—ë—Ç 3
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî –ú–µ–º–æ–∏–∑–∞—Ü–∏—è (—Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑) {id: "lcs-memoization"}

```just-ncv
memo = {}  # –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫—ç—à

func lcs_memo(A: str, B: str, i: int32, j: int32) -> int32:
    # –ë–∞–∑–æ–≤—ã–µ —Å–ª—É—á–∞–∏
    if i == 0 or j == 0:
        return 0
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
    key = (i, j)
    if key in memo:
        return memo[key]
    
    # –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π —Å–ª—É—á–∞–π
    var result: int32
    if A[i-1] == B[j-1]:
        result = 1 + lcs_memo(A, B, i-1, j-1)
    else:
        result = max(lcs_memo(A, B, i-1, j), 
                     lcs_memo(A, B, i, j-1))
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫—ç—à
    memo[key] = result
    return result

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
result = lcs_memo("ABCD", "ACD", 4, 3)  # –í–µ—Ä–Ω—ë—Ç 3
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∞–º–æ–π –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ {id: "lcs-reconstruction"}

–ü–æ—Å–ª–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è DP —Ç–∞–±–ª–∏—Ü—ã –º–æ–∂–µ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∞–º—É –ù–û–ü, –∏–¥—è –æ—Ç –∫–æ–Ω—Ü–∞ –∫ –Ω–∞—á–∞–ª—É:

```just-ncv
func reconstruct_lcs(A: str, B: str, dp: array) -> str:
    n = len(A)
    m = len(B)
    
    result = ""
    i = n
    j = m
    
    # –ò–¥—ë–º –æ—Ç –∫–æ–Ω—Ü–∞ –∫ –Ω–∞—á–∞–ª—É
    while i > 0 and j > 0:
        # –ï—Å–ª–∏ —Å–∏–º–≤–æ–ª—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç, —ç—Ç–æ —á–∞—Å—Ç—å –ù–û–ü
        if A[i-1] == B[j-1]:
            result = A[i-1] + result  # –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ
            i -= 1
            j -= 1
        # –ï—Å–ª–∏ –Ω–µ—Ç, –∏–¥—ë–º –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –±–æ–ª—å—à–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
        elif dp[i-1][j] > dp[i][j-1]:
            i -= 1
        else:
            j -= 1
    
    return result

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
lcs_string = reconstruct_lcs("ABCD", "ACD", dp_table)
print(lcs_string)  # –í—ã–≤–µ–¥–µ—Ç "ACD"
```

### –°–ª–æ–∂–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è {id: "lcs-complexity"}

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–í—Ä–µ–º—è** | $O(NM)$ ‚Äî –¥–≤–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ü–∏–∫–ª–∞ |
| **–ü–∞–º—è—Ç—å** | $O(NM)$ ‚Äî —Ç–∞–±–ª–∏—Ü–∞ DP |
| **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏** | $O(M)$ ‚Äî —Ö—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ 2 —Å—Ç—Ä–æ–∫–∏ –≤–º–µ—Å—Ç–æ N |

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏** (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª–∏–Ω–∞):

```just-ncv
func lcs_space_optimized(A: str, B: str) -> int32:
    n = len(A)
    m = len(B)
    
    prev = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (m+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    curr = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (m+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    
    for i in 1..n:
        for j in 1..m:
            if A[i-1] == B[j-1]:
                curr[j] = prev[j-1] + 1
            else:
                curr[j] = max(prev[j], curr[j-1])
        
        prev, curr = curr, prev  # Swap
    
    return prev[m]
```

---

## –ù–∞–∏–±–æ–ª—å—à–∞—è –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∞—è –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ù–í–ü) {id: "lis"}

### –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏ {id: "lis-problem-statement"}

–î–∞–Ω –º–∞—Å—Å–∏–≤ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª. –ù–∞–π—Ç–∏ **–¥–ª–∏–Ω—É –Ω–∞–∏–±–æ–ª—å—à–µ–π –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–µ–π –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** (—ç–ª–µ–º–µ–Ω—Ç—ã —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ –ø–æ—Ä—è–¥–∫–µ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—è, –Ω–æ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–º–µ–∂–Ω—ã–µ).

**–ü—Ä–∏–º–µ—Ä—ã:**
- –ú–∞—Å—Å–∏–≤: $[10, 9, 2, 5, 3, 7, 101, 18]$ ‚Üí –ù–í–ü: $[2, 3, 7, 101]$ (–¥–ª–∏–Ω–∞ 4)
- –ú–∞—Å—Å–∏–≤: $[3, 10, 2, 1, 20]$ ‚Üí –ù–í–ü: $[3, 10, 20]$ (–¥–ª–∏–Ω–∞ 3)
- –ú–∞—Å—Å–∏–≤: $[1, 2, 3]$ ‚Üí –ù–í–ü: $[1, 2, 3]$ (–¥–ª–∏–Ω–∞ 3)

---

### –ü–æ–¥—Ö–æ–¥ 1: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ $O(n^2)$ {id: "lis-n2"}

#### –ò–¥–µ—è {id: "lis-n2-idea"}

–û–ø—Ä–µ–¥–µ–ª–∏–º $dp[i]$ = **–¥–ª–∏–Ω–∞ –ù–í–ü, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–µ–π—Å—è –≤ —ç–ª–µ–º–µ–Ω—Ç–µ $i$**.

–î–ª—è –∫–∞–∂–¥–æ–≥–æ $i$, –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ $j < i$:
- –ï—Å–ª–∏ $arr[j] < arr[i]$, —Ç–æ –º–æ–∂–µ–º —Ä–∞—Å—à–∏—Ä–∏—Ç—å –ù–í–ü –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â—É—é—Å—è –≤ $j$, –¥–æ–±–∞–≤–∏–≤ $arr[i]$.
- –ë–µ—Ä—ë–º –º–∞–∫—Å–∏–º—É–º: $dp[i] = 1 + \max_{j < i, arr[j] < arr[i]} dp[j]$

#### –†–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ {id: "lis-n2-recursion"}

$$
dp[i] = 1 + \max\{dp[j] : j < i \text{ –∏ } arr[j] < arr[i]\}
$$

–ï—Å–ª–∏ –Ω–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö $j$, —Ç–æ $dp[i] = 1$ (—Å–∞–º–∞ –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–¥–Ω–∞).

#### –ü—Ä–∏–º–µ—Ä —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ {id: "lis-n2-trace-example"}

–ú–∞—Å—Å–∏–≤: $[10, 9, 2, 5, 3, 7, 101, 18]$

| i | arr[i] | dp[i] | –û–±—ä—è—Å–Ω–µ–Ω–∏–µ |
|---|--------|-------|-----------|
| 0 | 10 | 1 | –ù–í–ü –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 10 |
| 1 | 9 | 1 | 9 < 10, –Ω–∞—á–∏–Ω–∞–µ–º –∑–∞–Ω–æ–≤–æ |
| 2 | 2 | 1 | 2 < –≤—Å–µ, –Ω–∞—á–∏–Ω–∞–µ–º –∑–∞–Ω–æ–≤–æ |
| 3 | 5 | 2 | 2 < 5, —Ä–∞—Å—à–∏—Ä—è–µ–º [2] ‚Üí [2, 5] |
| 4 | 3 | 2 | 2 < 3 < 5, —Ä–∞—Å—à–∏—Ä—è–µ–º [2] ‚Üí [2, 3] |
| 5 | 7 | 3 | max(2+1, 3+1) = 3, —Ä–∞—Å—à–∏—Ä—è–µ–º [2, 5] ‚Üí [2, 5, 7] |
| 6 | 101 | 4 | 7 < 101, —Ä–∞—Å—à–∏—Ä—è–µ–º [2, 5, 7] ‚Üí [2, 5, 7, 101] |
| 7 | 18 | 4 | 7 < 18, –Ω–æ –Ω–µ –ª—É—á—à–µ —á–µ–º 101 |

**–û—Ç–≤–µ—Ç:** $\max(dp) = 4$ (–ù–í–ü = $[2, 5, 7, 101]$)

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è {id: "lis-n2-implementation"}

```just-ncv
func lis_n2(arr: array<int32>) -> int32:
    n = len(arr)
    
    # dp[i] = –¥–ª–∏–Ω–∞ –ù–í–ü –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–µ–π—Å—è –≤ i-–º —ç–ª–µ–º–µ–Ω—Ç–µ
    dp = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º n –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –µ–¥–∏–Ω–∏—Ü–∞–º–∏
    
    for i in 1..n-1:
        for j in 0..i-1:
            # –ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç arr[j] –º–µ–Ω—å—à–µ arr[i], –º–æ–∂–µ–º —Ä–∞—Å—à–∏—Ä–∏—Ç—å
            if arr[j] < arr[i]:
                dp[i] = max(dp[i], dp[j] + 1)
    
    # –ò—â–µ–º –º–∞–∫—Å–∏–º—É–º
    return max_element(dp)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
result = lis_n2([10, 9, 2, 5, 3, 7, 101, 18])  # –í–µ—Ä–Ω—ë—Ç 4
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:**
- **–í—Ä–µ–º—è:** $O(n^2)$ ‚Äî –¥–≤–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ü–∏–∫–ª–∞
- **–ü–∞–º—è—Ç—å:** $O(n)$ ‚Äî –º–∞—Å—Å–∏–≤ DP

---

### –ü–æ–¥—Ö–æ–¥ 2: –ë–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫ $O(n \log n)$ ‚Äî –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π {id: "lis-nlogn"}

#### –ò–¥–µ—è {id: "lis-nlogn-idea"}

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ —Å—á–∏—Ç–∞–µ—Ç—Å—è **–±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º**, –Ω–æ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å: "–∫–∞–∫–æ–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ù–í–ü –¥–ª–∏–Ω—ã $k$?"

–•—Ä–∞–Ω–∏–º –º–∞—Å—Å–∏–≤ `tail`, –≥–¥–µ `tail[k]` = **–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç –ù–í–ü –¥–ª–∏–Ω—ã $k+1$**.

**–ö–ª—é—á–µ–≤–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ:** –º–∞—Å—Å–∏–≤ `tail` –≤—Å–µ–≥–¥–∞ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω!

#### –ú–µ—Ö–∞–Ω–∏–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ {id: "lis-nlogn-mechanics"}

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ `x`:
1. –ò—â–µ–º –≤ `tail` –º–µ—Å—Ç–æ –¥–ª—è `x` —Å –ø–æ–º–æ—â—å—é –¥–≤–æ–∏—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞.
2. –ï—Å–ª–∏ –Ω–∞–π–¥—ë–º —ç–ª–µ–º–µ–Ω—Ç $\geq x$ –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ `i`, –∑–∞–º–µ–Ω–∏–º `tail[i]` –Ω–∞ `x`.
   - –ü–æ—á–µ–º—É? –ü–æ—Ç–æ–º—É —á—Ç–æ `x` –º–µ–Ω—å—à–µ, –∏ —Å –Ω–∏–º –º–æ–∂–µ–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ª—É—á—à–µ.
3. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥—ë–º (—Ç.–µ. `x` –±–æ–ª—å—à–µ –≤—Å–µ—Ö), –¥–æ–±–∞–≤–∏–º `x` –≤ –∫–æ–Ω–µ—Ü `tail`.
   - –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–∞—à–ª–∏ –ù–í–ü –¥–ª–∏–Ω—ã –Ω–∞ 1 –±–æ–ª—å—à–µ.

#### –ü—Ä–∏–º–µ—Ä —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ {id: "lis-nlogn-trace-example"}

–ú–∞—Å—Å–∏–≤: $[10, 9, 2, 5, 3, 7, 101, 18]$

| –≠–ª–µ–º–µ–Ω—Ç | tail | –®–∞–≥ | –û–±—ä—è—Å–Ω–µ–Ω–∏–µ |
|---------|------|-----|-----------|
| 10 | [10] | 1Ô∏è‚É£ | –ü–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç, –¥–æ–±–∞–≤–ª—è–µ–º |
| 9 | [9] | 2Ô∏è‚É£ | 9 < 10, –∑–∞–º–µ–Ω—è–µ–º tail[0] |
| 2 | [2] | 3Ô∏è‚É£ | 2 < 9, –∑–∞–º–µ–Ω—è–µ–º tail[0] |
| 5 | [2, 5] | 4Ô∏è‚É£ | 5 > 2, –¥–æ–±–∞–≤–ª—è–µ–º (–ù–í–ü –¥–ª–∏–Ω—ã 2) |
| 3 | [2, 3] | 5Ô∏è‚É£ | 3 –º–µ–∂–¥—É 2 –∏ 5, –∑–∞–º–µ–Ω—è–µ–º tail[1] (–ª—É—á—à–µ) |
| 7 | [2, 3, 7] | 6Ô∏è‚É£ | 7 > 3, –¥–æ–±–∞–≤–ª—è–µ–º (–ù–í–ü –¥–ª–∏–Ω—ã 3) |
| 101 | [2, 3, 7, 101] | 7Ô∏è‚É£ | 101 > 7, –¥–æ–±–∞–≤–ª—è–µ–º (–ù–í–ü –¥–ª–∏–Ω—ã 4) |
| 18 | [2, 3, 7, 18] | 8Ô∏è‚É£ | 18 –º–µ–∂–¥—É 7 –∏ 101, –∑–∞–º–µ–Ω—è–µ–º tail[3] (–ª—É—á—à–µ) |

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å –±–∏–Ω–∞—Ä–Ω—ã–º –ø–æ–∏—Å–∫–æ–º:**

```mermaid
graph LR
    A["x=5<br/>tail=[2]"] -->|lower_bound*| B["–ü–æ–∑–∏—Ü–∏—è 1<br/>–¥–æ–±–∞–≤–ª—è–µ–º"]
    B --> C["tail=[2,5]"]
    
    D["x=3<br/>tail=[2,5]"] -->|lower_bound*| E["–ü–æ–∑–∏—Ü–∏—è 1<br/>–∑–∞–º–µ–Ω—è–µ–º"]
    E --> F["tail=[2,3]"]
    
    G["x=18<br/>tail=[2,3,7,101]"] -->|lower_bound*| H["–ü–æ–∑–∏—Ü–∏—è 3<br/>–∑–∞–º–µ–Ω—è–µ–º"]
    H --> I["tail=[2,3,7,18]"]
    
    style B fill:lime
    style E fill:cyan
    style H fill:orange
```

> **–°—É—Ç—å:** `lower_bound` ‚Äî —ç—Ç–æ –¥–≤–æ–∏—á–Ω—ã–π –ø–æ–∏—Å–∫, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç **–ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ –º–∞—Å—Å–∏–≤–µ, –∫–æ—Ç–æ—Ä—ã–π ‚â• x**. –ï—Å–ª–∏ –Ω–∞–π–¥—ë–º, –∑–∞–º–µ–Ω—è–µ–º –µ–≥–æ (–¥–µ–ª–∞–µ–º –ª—É—á—à–µ). –ï—Å–ª–∏ –Ω–µ—Ç, –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω–µ—Ü.

**–§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:** $\text{len(tail)} = 4$ (–¥–ª–∏–Ω–∞ –ù–í–ü)

> **–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?** –ú–∞—Å—Å–∏–≤ `tail` –≤—Å–µ–≥–¥–∞ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω. –ó–∞–º–µ–Ω—è—è —ç–ª–µ–º–µ–Ω—Ç –Ω–∞ –º–µ–Ω—å—à–∏–π, –Ω–µ –ø–æ—Ä—Ç–∏–º –º–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å. –î–æ–±–∞–≤–ª—è—è –≤ –∫–æ–Ω–µ—Ü, —Ä–∞—Å—à–∏—Ä—è–µ–º –ù–í–ü. –§–∏–Ω–∞–ª—å–Ω—ã–π `tail` –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —è–≤–ª—è–µ—Ç—Å—è —Å–∞–º–∞ –ù–í–ü, –Ω–æ –µ–≥–æ –¥–ª–∏–Ω–∞ = –¥–ª–∏–Ω–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –ù–í–ü.

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è {id: "lis-nlogn-implementation"}

```just-ncv
# –§—É–Ω–∫—Ü–∏—è –±–∏–Ω–∞—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–∏—â–µ–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç >= x)
func binary_search_gte(arr: array<int32>, x: int32) -> int32:
    left = 0
    right = len(arr)
    
    while left < right:
        mid = (left + right) / 2
        if arr[mid] < x:
            left = mid + 1
        else:
            right = mid
    
    return left

func lis_nlogn(arr: array<int32>) -> int32:
    tail = []  # –ü—É—Å—Ç–æ –≤ –Ω–∞—á–∞–ª–µ
    
    for x in arr:
        # –ò—â–µ–º –ø–æ–∑–∏—Ü–∏—é –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ x
        pos = binary_search_gte(tail, x)
        
        if pos == len(tail):
            # x –±–æ–ª—å—à–µ –≤—Å–µ—Ö ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω–µ—Ü
            tail.append(x)
        else:
            # –ó–∞–º–µ–Ω—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ pos
            tail[pos] = x
    
    return len(tail)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
result = lis_nlogn([10, 9, 2, 5, 3, 7, 101, 18])  # –í–µ—Ä–Ω—ë—Ç 4
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:**
- **–í—Ä–µ–º—è:** $O(n \log n)$ ‚Äî n —ç–ª–µ–º–µ–Ω—Ç–æ–≤ √ó $\log n$ –Ω–∞ –¥–≤–æ–∏—á–Ω—ã–π –ø–æ–∏—Å–∫
- **–ü–∞–º—è—Ç—å:** $O(n)$ ‚Äî –º–∞—Å—Å–∏–≤ tail

#### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ {id: "lis-nlogn-with-builtin"}

```just-ncv
func lis_nlogn_with_builtin(arr: array<int32>) -> int32:
    tail = []
    
    for x in arr:
        # lower_bound ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–≤–æ–∏—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
        # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç >= x
        it = lower_bound(tail, x)
        
        if it == end(tail):
            tail.append(x)
        else:
            *it = x  # –†–∞–∑—ã–º–µ–Ω–æ–≤—ã–≤–∞–µ–º –∏ –∑–∞–º–µ–Ω—è–µ–º
    
    return len(tail)
```

---

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∞–º–æ–π –ù–í–ü {id: "lis-reconstruction"}

–ü–æ—Å–ª–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –¥–ª–∏–Ω—ã –º–æ–∂–µ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∞–º—É –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

```just-ncv
func reconstruct_lis(arr: array<int32>) -> array<int32>:
    n = len(arr)
    dp = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º n –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –µ–¥–∏–Ω–∏—Ü–∞–º–∏
    parent = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º n –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (-1)
    
    # –ó–∞–ø–æ–ª–Ω—è–µ–º DP —Ç–∞–±–ª–∏—Ü—É
    for i in 1..n-1:
        for j in 0..i-1:
            if arr[j] < arr[i] and dp[j] + 1 > dp[i]:
                dp[i] = dp[j] + 1
                parent[i] = j  # –ó–∞–ø–æ–º–∏–Ω–∞–µ–º, –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à–ª–∏
    
    # –ò—â–µ–º –∫–æ–Ω–µ—Ü –ù–í–ü (–≥–¥–µ dp[i] = max)
    max_length = max_element(dp)
    end_index = index_of(dp, max_length)  # –ò–Ω–¥–µ–∫—Å –º–∞–∫—Å–∏–º—É–º–∞
    
    # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—É—Ç—å
    result = []
    current = end_index
    while current != -1:
        result.prepend(arr[current])  # –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ
        current = parent[current]
    
    return result

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
lis_sequence = reconstruct_lis([10, 9, 2, 5, 3, 7, 101, 18])
# –í–µ—Ä–Ω—ë—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ [2, 3, 7, 101]
```

---

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤ {id: "lis-comparison"}

| –ö—Ä–∏—Ç–µ—Ä–∏–π | O(n¬≤) | O(n log n) |
|----------|-------|-----------|
| –í—Ä–µ–º—è | $O(n^2)$ | $O(n \log n)$ |
| –ü–∞–º—è—Ç—å | $O(n)$ | $O(n)$ |
| –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –ü—Ä–æ—Å—Ç–∞ | –°–ª–æ–∂–Ω–µ–µ |
| –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è | –õ–µ–≥–∫–æ (–º–∞—Å—Å–∏–≤ parent) | –°–ª–æ–∂–Ω–µ–µ |
| –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å | n < 5000 | n > 5000 |

---

# DP –ø–æ –ø–æ–¥–¥–µ—Ä–µ–≤—å—è–º {id: "dp-by-subtree"}

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–¥–∞—á –Ω–∞ –¥–µ—Ä–µ–≤—å—è—Ö, –≥–¥–µ –Ω—É–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å —á—Ç–æ-—Ç–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–¥–µ—Ä–µ–≤–∞ (–∏–ª–∏ –ø—É—Ç—ë–º –≤ –¥–µ—Ä–µ–≤–µ).

---

## –ü—Ä–∏–º–µ—Ä: –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å –ø—É—Ç–∏ –±–µ–∑ —Å–æ—Å–µ–¥–µ–π {id: "max-weight-no-adjacent-nodes"}

### –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏ {id: "max-weight-no-adjacent-nodes-problem-statement"}

–î–∞–Ω–æ –¥–µ—Ä–µ–≤–æ —Å –≤–µ—Å–∞–º–∏ –≤ —É–∑–ª–∞—Ö. –ù–∞–π—Ç–∏ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å—É–º–º–∞—Ä–Ω—ã–π –≤–µ—Å –ø—É—Ç–∏**, –≥–¥–µ **–Ω–∏–∫–∞–∫–∏–µ –¥–≤–∞ —Å–æ—Å–µ–¥–Ω–∏—Ö —É–∑–ª–∞ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±–∞ –≤—ã–±—Ä–∞–Ω—ã**.

**–ü—Ä–∏–º–µ—Ä—ã:**
- –î–µ—Ä–µ–≤–æ —Å –≤–µ—Å–∞–º–∏:

```mermaid
graph TD
    Root["5 (–∫–æ—Ä–µ–Ω—å)<br/>–ë–µ—Ä—ë–º ‚úì"]
    Root --> Left["3 (–ª–µ–≤—ã–π)<br/>–ù–µ –±–µ—Ä—ë–º ‚úó"]
    Root --> Right["7 (–ø—Ä–∞–≤—ã–π)<br/>–ù–µ –±–µ—Ä—ë–º ‚úó"]
    
    style Root fill:green
    style Left fill:red
    style Right fill:red
```

–ü—Ä–∞–≤–∏–ª–æ: –µ—Å–ª–∏ –±–µ—Ä—ë–º —É–∑–µ–ª, **–Ω–µ –º–æ–∂–µ–º –±—Ä–∞—Ç—å –µ–≥–æ —Å–æ—Å–µ–¥–µ–π** (—Ä–æ–¥–∏—Ç–µ–ª—è –∏ –¥–µ—Ç–µ–π).

### –†–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ {id: "max-weight-no-adjacent-nodes-recursion"}

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞ $v$ –æ–ø—Ä–µ–¥–µ–ª–∏–º:
- $dp[v][0]$ = –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å –≤ –ø–æ–¥–¥–µ—Ä–µ–≤–µ $v$, **–Ω–µ –±–µ—Ä—è —Å–∞–º —É–∑–µ–ª $v$**
- $dp[v][1]$ = –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å –≤ –ø–æ–¥–¥–µ—Ä–µ–≤–µ $v$, **–±–µ—Ä—è —Å–∞–º —É–∑–µ–ª $v$**

$$
dp[v][0] = \sum_{\text{–¥–µ—Ç–∏ } u} \max(dp[u][0], dp[u][1])
$$

$$
dp[v][1] = weight[v] + \sum_{\text{–¥–µ—Ç–∏ } u} dp[u][0]
$$

**–û—Ç–≤–µ—Ç:** $\max(dp[\text{–∫–æ—Ä–µ–Ω—å}][0], dp[\text{–∫–æ—Ä–µ–Ω—å}][1])$

### –ü—Ä–∏–º–µ—Ä —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ {id: "max-weight-no-adjacent-nodes-trace-example"}

–î–µ—Ä–µ–≤–æ:

```mermaid
graph TD
    A["10 (–∫–æ—Ä–µ–Ω—å)"]
    A --> B["5"]
    A --> C["7"]
    B --> D["2"]
    B --> E["4"]
    
    style D fill:yellow
    style E fill:yellow
    style B fill:blue
    style C fill:blue
    style A fill:purple
```

| –£–∑–µ–ª | –í–µ—Å | dp[—É–∑–µ–ª][0] | dp[—É–∑–µ–ª][1] | –ü–æ—è—Å–Ω–µ–Ω–∏–µ |
|-----|-----|-----------|-----------|-----------|
| 2 (–ª–∏—Å—Ç) | 2 | 0 | 2 | –ù–µ –±–µ—Ä—ë–º=0, –±–µ—Ä—ë–º=2 |
| 4 (–ª–∏—Å—Ç) | 4 | 0 | 4 | –ù–µ –±–µ—Ä—ë–º=0, –±–µ—Ä—ë–º=4 |
| 7 (–ª–∏—Å—Ç) | 7 | 0 | 7 | –ù–µ –±–µ—Ä—ë–º=0, –±–µ—Ä—ë–º=7 |
| 5 (2 –¥–µ—Ç–µ–π) | 5 | max(0,2)+max(0,4)=6 | 5+0+0=5 | –ù–µ –±–µ—Ä—ë–º=6, –±–µ—Ä—ë–º=5 |
| 10 (2 –¥–µ—Ç–µ–π) | 10 | max(6,5)+max(0,7)=13 | 10+6+0=16 | –ù–µ –±–µ—Ä—ë–º=13, –±–µ—Ä—ë–º=16 |

**–û—Ç–≤–µ—Ç:** $\max(13, 16) = 16$ (–≤—ã–±–∏—Ä–∞–µ–º —É–∑–ª—ã 10, 5, –∏ –æ–¥–∏–Ω –∏–∑ –¥–µ—Ç–µ–π —É–∑–ª–∞ 5)

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è {id: "max-weight-no-adjacent-nodes-implementation"}

```just-ncv
struct Node:
    value: int32
    left: optional<Node>
    right: optional<Node>
    children: array<Node>  # –î–ª—è –æ–±—â–µ–≥–æ —Å–ª—É—á–∞—è

func dfs_tree_dp(v: Node, parent: optional<Node>) -> array<int64>:
    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º [dp[v][0], dp[v][1]]
    
    result = [0, v.value]  # [–Ω–µ –±–µ—Ä—ë–º, –±–µ—Ä—ë–º]
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤—Å–µ—Ö –¥–µ—Ç–µ–π
    for child in v.children:
        if child == parent:
            continue
        
        child_dp = dfs_tree_dp(child, v)
        
        # –ï—Å–ª–∏ –Ω–µ –±–µ—Ä—ë–º v, –º–æ–∂–µ–º –±—Ä–∞—Ç—å –∏–ª–∏ –Ω–µ –±—Ä–∞—Ç—å –¥–µ—Ç–µ–π
        result[0] += max(child_dp[0], child_dp[1])
        
        # –ï—Å–ª–∏ –±–µ—Ä—ë–º v, –Ω–µ –º–æ–∂–µ–º –±—Ä–∞—Ç—å –¥–µ—Ç–µ–π
        result[1] += child_dp[0]
    
    return result

func solve_tree_dp(root: Node) -> int64:
    result = dfs_tree_dp(root, null)
    return max(result[0], result[1])
```

---

## –î—Ä—É–≥–∏–µ DP –Ω–∞ –¥–µ—Ä–µ–≤—å—è—Ö {id: "other-dp-on-trees"}

### –î–∏–∞–º–µ—Ç—Ä –¥–µ—Ä–µ–≤–∞ {id: "tree-diameter"}

–ù–∞–π—Ç–∏ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è —É–∑–ª–∞–º–∏**.

```just-ncv
func dfs_diameter(v: Node, parent: Node) -> pair<int32, int32>:
    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º (–¥–∏–∞–º–µ—Ç—Ä –ø–æ–¥–¥–µ—Ä–µ–≤–∞, –º–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞)
    
    diameter = 0
    max_depth = 0
    
    depths = []  # –ì–ª—É–±–∏–Ω—ã –≤—Å–µ—Ö –¥–µ—Ç–µ–π
    
    for child in v.children:
        if child == parent:
            continue
        
        (child_diam, child_depth) = dfs_diameter(child, v)
        diameter = max(diameter, child_diam)
        depths.append(child_depth + 1)
    
    # –î–∏–∞–º–µ—Ç—Ä –º–æ–∂–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ v
    if len(depths) >= 2:
        depths.sort()
        diameter = max(diameter, depths[-1] + depths[-2])
    
    max_depth = if len(depths) > 0 then max(depths) else 0
    
    return (diameter, max_depth)
```

---

# –†—é–∫–∑–∞–∫ {id: "knapsack"}

–°–µ–º–µ–π—Å—Ç–≤–æ –∑–∞–¥–∞—á **–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:** –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –º–∞–∫—Å–∏–º–∏–∑–∏—Ä—É—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–∏ –ø–æ –≤–µ—Å—É. –≠—Ç–æ –æ–¥–Ω–∞ –∏–∑ **—Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö** DP –∑–∞–¥–∞—á!

---

## 0-1 –†—é–∫–∑–∞–∫ {id: "knapsack-0-1"}

### –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏ {id: "knapsack-0-1-problem-statement"}

–ö–∞–∂–¥—ã–π –ø—Ä–µ–¥–º–µ—Ç –º–æ–∂–Ω–æ –≤–∑—è—Ç—å **–º–∞–∫—Å–∏–º—É–º –æ–¥–∏–Ω —Ä–∞–∑**.

**–î–∞–Ω–æ:**
- $n$ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –í–µ—Å –ø—Ä–µ–¥–º–µ—Ç–∞ $i$: $w_i$
- –°—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–µ–¥–º–µ—Ç–∞ $i$: $v_i$
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å —Ä—é–∫–∑–∞–∫–∞: $W$

**–ù–∞–π—Ç–∏:** –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å, –≤—ã–±—Ä–∞–≤ –ø—Ä–µ–¥–º–µ—Ç—ã —Å —Å—É–º–º–∞—Ä–Ω—ã–º –≤–µ—Å–æ–º $\leq W$.

**–ü—Ä–∏–º–µ—Ä—ã:**
- –ü—Ä–µ–¥–º–µ—Ç—ã: –≤–µ—Å=[2, 3, 4, 5], —Å—Ç–æ–∏–º–æ—Å—Ç—å=[3, 4, 5, 6], W=5
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ: –≤–∑—è—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã 0 –∏ 1 (–≤–µ—Å=5, —Å—Ç–æ–∏–º–æ—Å—Ç—å=7)

### –ò–Ω—Ç—É–∏—Ü–∏—è –∏ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ {id: "knapsack-0-1-recursion"}

–û–ø—Ä–µ–¥–µ–ª–∏–º $dp[i][w]$ = **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—è –ø–µ—Ä–≤—ã–µ $i$ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å –≤–µ—Å–æ–º $\leq w$**.

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ $i$, –µ—Å—Ç—å –¥–≤–∞ –≤—ã–±–æ—Ä–∞:
1. **–ù–µ –±–µ—Ä—ë–º –ø—Ä–µ–¥–º–µ—Ç $i$:** $dp[i-1][w]$
2. **–ë–µ—Ä—ë–º –ø—Ä–µ–¥–º–µ—Ç $i$** (–µ—Å–ª–∏ –≤–µ—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç): $dp[i-1][w-w_i] + v_i$

$$
dp[i][w] = \begin{cases}
0 & \text{–µ—Å–ª–∏ } i = 0 \text{ –∏–ª–∏ } w = 0 \\
dp[i-1][w] & \text{–µ—Å–ª–∏ } w_i > w \text{ (–Ω–µ –≤–ª–µ–∑–∞–µ—Ç)} \\
\max(dp[i-1][w], dp[i-1][w-w_i] + v_i) & \text{–∏–Ω–∞—á–µ}
\end{cases}
$$

### –ü—Ä–∏–º–µ—Ä —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ {id: "knapsack-0-1-trace-example"}

–ü—Ä–µ–¥–º–µ—Ç—ã: `w=[2,3,4]`, `v=[3,4,5]`, $W=5$

**–¢–∞–±–ª–∏—Ü–∞ DP:**

| i\w | 0 | 1 | 2 | 3 | 4 | 5 |
|-----|---|---|---|---|---|---|
| 0   | 0 | 0 | 0 | 0 | 0 | 0 |
| 1(w=2,v=3) | 0 | 0 | **3** | 3 | 3 | 3 |
| 2(w=3,v=4) | 0 | 0 | 3 | **4** | 4 | **7** |
| 3(w=4,v=5) | 0 | 0 | 3 | 4 | **5** | **7** |

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ—à–µ–Ω–∏–π –≤ —Ç–∞–±–ª–∏—Ü–µ:**

```mermaid
graph TD
    A["–†—é–∫–∑–∞–∫: W=5"] --> B["1Ô∏è‚É£ –ü—Ä–µ–¥–º–µ—Ç 0 (w=2, v=3)<br/>–ë–µ—Ä—ë–º?"]
    B -->|–î–ê| C["dp[1][2] = 3"]
    B -->|–î–ê| D["dp[1][3..5] = 3"]
    
    A --> E["2Ô∏è‚É£ –ü—Ä–µ–¥–º–µ—Ç 1 (w=3, v=4)<br/>–ë–µ—Ä—ë–º?"]
    E -->|–î–ê + –ü—Ä–µ–¥–º–µ—Ç 0| F["dp[2][5] = 3 + 4 = 7 ‚úì"]
    
    A --> G["3Ô∏è‚É£ –ü—Ä–µ–¥–º–µ—Ç 2 (w=4, v=5)<br/>–ë–µ—Ä—ë–º?"]
    G -->|–ù–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è| H["dp[3][5] = max(7, ?) = 7 ‚úì"]
    
    style F fill:lime
    style H fill:cyan
```

**–ü–æ—à–∞–≥–æ–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ:**

- $(1,2)$: –ü—Ä–µ–¥–º–µ—Ç 0 –≤–ª–µ–∑–∞–µ—Ç –≤ –≤–µ—Å 2 ‚Üí $dp[0][0] + 3 = 3$ ‚úÖ
- $(2,3)$: –ü—Ä–µ–¥–º–µ—Ç 1 –≤–ª–µ–∑–∞–µ—Ç –≤ –≤–µ—Å 3 ‚Üí $dp[1][0] + 4 = 4$ ‚úÖ
- $(2,5)$: –ú–æ–∂–µ–º –≤–∑—è—Ç—å –æ–±–∞: –ø—Ä–µ–¥–º–µ—Ç 1 + –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –≤–µ—Å–∞ 2 ‚Üí $dp[1][2] + 4 = 3 + 4 = 7$ ‚úÖ‚úÖ
- $(3,4)$: –ü—Ä–µ–¥–º–µ—Ç 2 –≤–ª–µ–∑–∞–µ—Ç –≤ –≤–µ—Å 4 ‚Üí $dp[2][0] + 5 = 5$ (–Ω–æ —ç—Ç–æ –º–µ–Ω—å—à–µ 7)
- $(3,5)$: –ú–∞–∫—Å–∏–º—É–º = 7 (–±–µ—Ä—É –ø—Ä–µ–¥–º–µ—Ç—ã 0 –∏ 1)

**–û—Ç–≤–µ—Ç:** $dp[3][5] = 7$ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å –≤–µ—Å–æ–º ‚â§ 5)

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî —Ç–∞–±—É–ª—è—Ü–∏—è O(nW) {id: "knapsack-0-1-implementation"}

```just-ncv
func knapsack_01(w: array<int32>, v: array<int32>, W: int32) -> int32:
    n = len(w)
    
    # dp[i][cap] = max —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å –ø–µ—Ä–≤—ã–º–∏ i –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ –∏ capacity <= cap
    dp = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (n+1) √ó (W+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    
    for i in 1..n:
        for cap in 0..W:
            # –ù–µ –±–µ—Ä—ë–º i-–π –ø—Ä–µ–¥–º–µ—Ç
            dp[i][cap] = dp[i-1][cap]
            
            # –ï—Å–ª–∏ –º–æ–∂–µ–º –≤–∑—è—Ç—å i-–π –ø—Ä–µ–¥–º–µ—Ç
            if w[i-1] <= cap:
                dp[i][cap] = max(dp[i][cap], 
                                 dp[i-1][cap - w[i-1]] + v[i-1])
    
    return dp[n][W]

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
result = knapsack_01([2, 3, 4], [3, 4, 5], 5)  # –í–µ—Ä–Ω—ë—Ç 7
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ ‚Äî O(W) {id: "knapsack-0-1-memory-optimization"}

–í–º–µ—Å—Ç–æ 2D —Ç–∞–±–ª–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º 1D, **–ø—Ä–æ—Ö–æ–¥—è —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ**:

```just-ncv
func knapsack_01_1d(w: array<int32>, v: array<int32>, W: int32) -> int32:
    # dp[cap] = max —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å capacity <= cap
    dp = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (W+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    
    for i in 0..len(w)-1:
        # ‚ö†Ô∏è –í–ê–ñ–ù–û: –ø—Ä–æ—Ö–æ–¥–∏–º —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ!
        for cap in W..w[i]-1 step -1:
            dp[cap] = max(dp[cap], dp[cap - w[i]] + v[i])
    
    return dp[W]
```

**–ü–æ—á–µ–º—É —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ?**
- –°–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ: –ø—Ä–µ–¥–º–µ—Ç `i` –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ (–ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä—é–∫–∑–∞–∫).
- –°–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ: –∫–∞–∂–¥—ã–π –ø—Ä–µ–¥–º–µ—Ç —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è **—Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑**.

---

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è {id: "knapsack-0-1-reconstruction"}

–ö–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–µ–¥–º–µ—Ç—ã –≤—ã–±—Ä–∞—Ç—å?

```just-ncv
func reconstruct_01_knapsack(w: array<int32>, v: array<int32>, 
                              dp: array, W: int32) -> array<int32>:
    n = len(w)
    selected = []
    
    cap = W
    for i in n..1 step -1:
        # –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ –∏–∑ "–≤–∑—è–ª–∏ –ø—Ä–µ–¥–º–µ—Ç"
        if cap >= w[i-1] and dp[i][cap] == dp[i-1][cap - w[i-1]] + v[i-1]:
            selected.prepend(i-1)  # –ü—Ä–µ–¥–º–µ—Ç i (0-indexed i-1)
            cap -= w[i-1]
    
    return selected

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
items = reconstruct_01_knapsack([2,3,4], [3,4,5], dp_table, 5)
# –í–µ—Ä–Ω—ë—Ç [0, 1] ‚Äî –≤—ã–±—Ä–∞–ª–∏ –ø—Ä–µ–¥–º–µ—Ç—ã —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ 0 –∏ 1
```

---

## –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä—é–∫–∑–∞–∫ {id: "knapsack-unbounded"}

### –û—Ç–ª–∏—á–∏–µ –æ—Ç 0-1 –†—é–∫–∑–∞–∫–∞ {id: "knapsack-unbounded-difference"}

–ö–∞–∂–¥—ã–π –ø—Ä–µ–¥–º–µ—Ç –º–æ–∂–Ω–æ –≤–∑—è—Ç—å **–Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑**.

**–ü—Ä–∏–º–µ—Ä—ã:**
- –†—é–∫–∑–∞–∫ —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º–∏ –∫–æ–ø–∏—è–º–∏ –º–æ–Ω–µ—Ç (–∑–∞–¥–∞—á–∞ –æ —Ä–∞–∑–º–µ–Ω–µ–∞–Ω–∏—é)
- –ù–∞–±–æ—Ä –∫–æ–Ω—Ñ–µ—Ç, –º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å

### –†–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ {id: "knapsack-unbounded-recursion"}

$$
dp[w] = \max_{i: w_i \leq w} (dp[w - w_i] + v_i)
$$

–ì–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ: **–ø—Ä–æ—Ö–æ–¥–∏–º —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ**, —á—Ç–æ–±—ã –æ–¥–∏–Ω –ø—Ä–µ–¥–º–µ—Ç –º–æ–≥ –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑.

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è {id: "knapsack-unbounded-implementation"}

```just-ncv
func knapsack_unbounded(w: array<int32>, v: array<int32>, W: int32) -> int32:
    # dp[cap] = max —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å capacity <= cap
    dp = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (W+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    
    for cap in 1..W:
        for i in 0..len(w)-1:
            # –ï—Å–ª–∏ –ø—Ä–µ–¥–º–µ—Ç i –≤–ª–µ–∑–∞–µ—Ç
            if w[i] <= cap:
                # –ú–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
                dp[cap] = max(dp[cap], dp[cap - w[i]] + v[i])
    
    return dp[W]

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
result = knapsack_unbounded([2, 3], [3, 4], 5)  # –í–µ—Ä–Ω—ë—Ç 6 (–±–µ—Ä—ë–º [3,3])
```

### –ü—Ä–∏–º–µ—Ä: —Ä–∞–∑–º–µ–Ω –º–æ–Ω–µ—Ç {id: "coin-change-min-coins"}

**–ó–∞–¥–∞—á–∞:** –Ω–∞–π—Ç–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç –Ω–æ–º–∏–Ω–∞–ª–æ–º $coins$ –¥–ª—è —Å—É–º–º—ã $amount$.

```just-ncv
func min_coins(coins: array<int32>, amount: int32) -> int32:
    # dp[i] = –º–∏–Ω. –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç –¥–ª—è —Å—É–º–º—ã i
    dp = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (amount+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω infinity
    dp[0] = 0  # 0 –º–æ–Ω–µ—Ç –¥–ª—è —Å—É–º–º—ã 0
    
    for i in 1..amount:
        for coin in coins:
            if coin <= i:
                dp[i] = min(dp[i], dp[i - coin] + 1)
    
    return dp[amount] if dp[amount] != infinity else -1
```

---

## –†—é–∫–∑–∞–∫ —Å–æ —Å—á—ë—Ç–æ–º —Å–ø–æ—Å–æ–±–æ–≤ {id: "knapsack-counting"}

### –ó–∞–¥–∞—á–∞ {id: "knapsack-counting-problem-statement"}

–°–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã **—Ä–æ–≤–Ω–æ —Å –≤–µ—Å–æ–º $w$** (0-1 —Ä—é–∫–∑–∞–∫)?

**–ü—Ä–∏–º–µ—Ä—ã:**
- –ü—Ä–µ–¥–º–µ—Ç—ã: –≤–µ—Å=[1, 2, 3], W=5
- –°–ø–æ—Å–æ–±—ã: [1,1,3], [2,3] ‚Üí **2 —Å–ø–æ—Å–æ–±–∞**

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è {id: "knapsack-counting-implementation"}

```just-ncv
func knapsack_counting_01(w: array<int32>, W: int32) -> int64:
    # dp[cap] = –∫–æ–ª-–≤–æ —Å–ø–æ—Å–æ–±–æ–≤ –ø–æ–ª—É—á–∏—Ç—å —Ä–æ–≤–Ω–æ –≤–µ—Å cap
    dp = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (W+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    dp[0] = 1  # –û–¥–∏–Ω —Å–ø–æ—Å–æ–± ‚Äî –Ω–∏—á–µ–≥–æ –Ω–µ –±—Ä–∞—Ç—å
    
    for i in 0..len(w)-1:
        # –°–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ –¥–ª—è 0-1 —Ä—é–∫–∑–∞–∫–∞
        for cap in W..w[i]-1 step -1:
            dp[cap] += dp[cap - w[i]]
    
    return dp[W]

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
result = knapsack_counting_01([1, 2, 3], 5)  # –í–µ—Ä–Ω—ë—Ç 2
```

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ä—é–∫–∑–∞–∫–∞ {id: "knapsack-comparison"}

| –í–∞—Ä–∏–∞–Ω—Ç | –ü—Ä–æ—Ö–æ–¥ | –ü–∞–º—è—Ç—å | –ü—Ä–∏–º–µ—Ä | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|---------|--------|--------|---------|-----------|
| 0-1 –†—é–∫–∑–∞–∫ | –°–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ | $O(W)$ | –ö–∞–∂–¥—ã–π –ø—Ä–µ–¥–º–µ—Ç –æ–¥–∏–Ω —Ä–∞–∑ | $O(nW)$ |
| –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π | –°–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ | $O(W)$ | –ú–æ–Ω–µ—Ç—ã, –∫–æ–Ω—Ñ–µ—Ç—ã | $O(nW)$ |
| –°—á—ë—Ç —Å–ø–æ—Å–æ–±–æ–≤ (0-1) | –°–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ | $O(W)$ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–π | $O(nW)$ |

---

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ —Ç—Ä—é–∫–∏ {id: "optimizations"}

## 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ (Swapping) {id: "dp-memory-optimization"}

–í–º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ–π DP —Ç–∞–±–ª–∏—Ü—ã, —Ö—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ –¥–≤–µ —Å—Ç—Ä–æ–∫–∏ (–ø—Ä–µ–¥—ã–¥—É—â—É—é –∏ —Ç–µ–∫—É—â—É—é):

```just-ncv
func lcs_space_opt(A: str, B: str) -> int32:
    m = len(B)
    
    prev = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (m+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    curr = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (m+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    
    for i in 1..len(A):
        for j in 1..m:
            if A[i-1] == B[j-1]:
                curr[j] = prev[j-1] + 1
            else:
                curr[j] = max(prev[j], curr[j-1])
        
        prev, curr = curr, prev  # Swapping
    
    return prev[m]
```

**–ü–∞–º—è—Ç—å:** $O(NM) \to O(M)$

---

## 2. –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ {id: "knapsack-sparse"}

–ï—Å–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å $W$ –æ–≥—Ä–æ–º–Ω—ã–π, –Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ä–µ–¥–∫–æ, –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω:

```just-ncv
func knapsack_sparse(w: array<int32>, v: array<int32>, W: int32) -> int32:
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–ª–æ–≤–∞—Ä—å –≤–º–µ—Å—Ç–æ –º–∞—Å—Å–∏–≤–∞
    dp = {}
    dp[0] = 0
    
    for i in 0..len(w)-1:
        new_dp = copy(dp)  # –ö–æ–ø–∏—Ä—É–µ–º –¥–ª—è 0-1 —Ä—é–∫–∑–∞–∫–∞
        
        for (cap, value) in dp:
            new_cap = cap + w[i]
            if new_cap <= W:
                if new_cap not in new_dp:
                    new_dp[new_cap] = 0
                new_dp[new_cap] = max(new_dp[new_cap], value + v[i])
        
        dp = new_dp
    
    return dp.get(W, 0)
```

---

## 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è {id: "dp-reconstruction"}

–í—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ "—Ä–æ–¥–∏—Ç–µ–ª–µ" –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ DP:

```just-ncv
struct DPState:
    value: int64
    parent: optional<tuple<int32, int32>>  # –û—Ç–∫—É–¥–∞ –ø—Ä–∏—à–ª–∏
    choice: str  # "take" –∏–ª–∏ "skip"

# –ü—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏:
if take_better:
    dp[i][j].parent = (i-1, j-w[i])
    dp[i][j].choice = "take"
else:
    dp[i][j].parent = (i-1, j)
    dp[i][j].choice = "skip"
```

---

## 4. –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è DP (–¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏) {id: "cyclic-dp"}

–í–º–µ—Å—Ç–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –±—É—Ñ–µ—Ä:

```just-ncv
# –í–º–µ—Å—Ç–æ prev/curr
buffers = [–º–∞—Å—Å–∏–≤, –º–∞—Å—Å–∏–≤, –º–∞—Å—Å–∏–≤]  # –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–π –±—É—Ñ–µ—Ä

for i in 0..1000000:
    current_buf = buffers[i % 3]
    prev_buf = buffers[(i-1) % 3]
    next_buf = buffers[(i+1) % 3]
```

---

## 5. –ü–∞—Ä–∞–ª–µ–ª–ª–∏–∑–º –≤ DP {id: "dp-parallelism"}

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ DP –∑–∞–¥–∞—á–∏ –º–æ–∂–Ω–æ —É—Å–∫–æ—Ä–∏—Ç—å —Å –ø–æ–º–æ—â—å—é –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞:

```just-ncv
# DP –ø–æ –±–ª–æ–∫–∞–º (–¥–ª—è DP –Ω–∞ –º–∞—Ç—Ä–∏—Ü–∞—Ö)
func parallel_dp():
    # –†–∞–∑–¥–µ–ª—è–µ–º –º–∞—Ç—Ä–∏—Ü—É –Ω–∞ –±–ª–æ–∫–∏
    # –ö–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –≤—ã—á–∏—Å–ª—è–µ—Ç —Å–≤–æ–π –±–ª–æ–∫
    # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º—Å—è –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö
```

---

## 6. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: Convex Hull Trick {id: "convex-hull-trick"}

–î–ª—è DP –≤–∏–¥–∞ $dp[i] = \min_j (a_j \cdot b_i + c_j)$, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—ã–ø—É–∫–ª—É—é –æ–±–æ–ª–æ—á–∫—É:

```just-ncv
# –ë—ã—Å—Ç—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ª–∏–Ω–µ–π–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
struct ConvexHullTrick:
    lines: array<pair<int64, int64>>  # (a, c) –¥–ª—è y = ax + c
    
    func add_line(a: int64, c: int64):
        # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –ª–∏–Ω–∏—é
        # –£–¥–∞–ª—è–µ–º "–±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–µ" –ª–∏–Ω–∏–∏ –∏–∑ hull
    
    func query(b: int64) -> int64:
        # –ò—â–µ–º –º–∏–Ω–∏–º—É–º y –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ b (x-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞)
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–≤–æ–∏—á–Ω—ã–π –ø–æ–∏—Å–∫
```

---

## 7. –ú–∞—Ç—Ä–∏—á–Ω–æ–µ –≤–æ–∑–≤–µ–¥–µ–Ω–∏–µ –≤ —Å—Ç–µ–ø–µ–Ω—å (–¥–ª—è –ª–∏–Ω–µ–π–Ω–æ–≥–æ DP) {id: "matrix-exponentiation"}

–ï—Å–ª–∏ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ª–∏–Ω–µ–π–Ω–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Ç—Ä–∏—á–Ω—ã–µ —Å—Ç–µ–ø–µ–Ω–∏:

$$
\begin{pmatrix} f(n) \\ f(n-1) \end{pmatrix} = \begin{pmatrix} 1 & 1 \\ 1 & 0 \end{pmatrix}^n \begin{pmatrix} 1 \\ 0 \end{pmatrix}
$$

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—á–∏—Ç–∞—Ç—å $f(10^{18})$ –∑–∞ $O(\log n)$ –æ–ø–µ—Ä–∞—Ü–∏–π!

```just-ncv
func matrix_power(matrix: array<array>, power: int64) -> array<array>:
    # –ë—ã—Å—Ç—Ä–æ–µ –≤–æ–∑–≤–µ–¥–µ–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã –≤ —Å—Ç–µ–ø–µ–Ω—å
    result = identity_matrix()
    base = matrix
    
    while power > 0:
        if power % 2 == 1:
            result = matrix_multiply(result, base)
        base = matrix_multiply(base, base)
        power /= 2
    
    return result
```

---

# –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã {id: "practical-examples"}

## –ü—Ä–∏–º–µ—Ä 1: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è (Edit Distance / Levenshtein) {id: "exmp-1-edit-distance"}

### –ó–∞–¥–∞—á–∞ {id: "edit-distance-problem"}

–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π (–≤—Å—Ç–∞–≤–∫–∞, —É–¥–∞–ª–µ–Ω–∏–µ, –∑–∞–º–µ–Ω–∞ —Å–∏–º–≤–æ–ª–∞) –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ $A$ –≤ —Å—Ç—Ä–æ–∫—É $B$.

**–ü—Ä–∏–º–µ—Ä—ã:**
- "KITTEN" ‚Üí "SITTING" (3 –æ–ø–µ—Ä–∞—Ü–∏–∏)
- "CAT" ‚Üí "DOG" (3 –æ–ø–µ—Ä–∞—Ü–∏–∏)
- "ABC" ‚Üí "ABC" (0 –æ–ø–µ—Ä–∞—Ü–∏–π)

### –†–µ—à–µ–Ω–∏–µ {id: "edit-distance-solution"}

```just-ncv
func edit_distance(A: str, B: str) -> int32:
    n = len(A)
    m = len(B)
    
    dp = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (n+1) √ó (m+1)
    
    # –ë–∞–∑–æ–≤—ã–µ —Å–ª—É—á–∞–∏
    for i in 0..n:
        dp[i][0] = i  # –£–¥–∞–ª–∏—Ç—å i —Å–∏–º–≤–æ–ª–æ–≤
    for j in 0..m:
        dp[0][j] = j  # –í—Å—Ç–∞–≤–∏—Ç—å j —Å–∏–º–≤–æ–ª–æ–≤
    
    # –ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–∞–±–ª–∏—Ü—É
    for i in 1..n:
        for j in 1..m:
            if A[i-1] == B[j-1]:
                dp[i][j] = dp[i-1][j-1]  # –ë–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏–π
            else:
                dp[i][j] = 1 + min(
                    dp[i-1][j],      # –£–¥–∞–ª–µ–Ω–∏—è
                    dp[i][j-1],      # –í—Å—Ç–∞–≤–∫–∞
                    dp[i-1][j-1]     # –ó–∞–º–µ–Ω–∞
                )
    
    return dp[n][m]

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
distance = edit_distance("KITTEN", "SITTING")  # 3
```

### –ü—Ä–∏–º–µ—Ä —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏: "KAT" ‚Üí "CAT" {id: "exmp-1-edit-distance-trace-example"}

| i\j | 0 | 1(C) | 2(A) | 3(T) |
|-----|---|------|------|------|
| 0   | 0 | 1    | 2    | 3    |
| 1(K)| 1 | **1**| 2    | 3    |
| 2(A)| 2 | 2    | **1**| 2    |
| 3(T)| 3 | 3    | 2    | **1**|

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π:**

```mermaid
graph LR
    A["KAT"] -->|–ó–∞–º–µ–Ω–∞ K‚ÜíC| B["CAT"]
    A -->|–£–¥–∞–ª–∏—Ç—å K<br/>–í—Å—Ç–∞–≤–∏—Ç—å C| C["CAT"]
    
    style B fill:lime
    style C fill:cyan
```

**–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:**
- $(1,1)$: K ‚â† C ‚Üí $1 + \min(dp[0][1], dp[1][0], dp[0][0]) = 1 + 0 = 1$ (–∑–∞–º–µ–Ω–∞)
- $(2,2)$: A = A ‚Üí $dp[1][1] = 1$ (—Å–æ–≤–ø–∞–¥–∞–µ—Ç, –±–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏–π)
- $(3,3)$: T = T ‚Üí $dp[2][2] = 1$ (—Å–æ–≤–ø–∞–¥–∞–µ—Ç, –±–µ–∑ –æ–ø–µ—Ä–∞—Ü–∏–π)

**–û—Ç–≤–µ—Ç:** 1 –æ–ø–µ—Ä–∞—Ü–∏—è (–∑–∞–º–µ–Ω–∞ K –Ω–∞ C)

---

## –ü—Ä–∏–º–µ—Ä 2: –ó–∞–¥–∞—á–∞ –∫–æ–º–º–∏–≤–æ—è–∂–µ—Ä–∞ (DP + Bitmask) {id: "exmp-2-tsp"}

### –ó–∞–¥–∞—á–∞ {id: "tsp-problem"}

–ù–∞–π—Ç–∏ –∫—Ä–∞—Ç—á–∞–π—à–∏–π –ø—É—Ç—å, –ø–æ—Å–µ—Ç–∏–≤ –≤—Å–µ –≥–æ—Ä–æ–¥–∞ —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Ä–∞–∑ (–Ω–µ–Ω–∞–π–¥–µ–Ω–Ω–æ–µ NP-—Å–ª–æ–∂–Ω–æ, –Ω–æ DP –¥–ª—è $n \leq 20$).

### –†–µ—à–µ–Ω–∏–µ {id: "tsp-solution"}

```just-ncv
func traveling_salesman(dist: array<array>, n: int32) -> int32:
    # dist[i][j] = —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏ i –∏ j
    # dp[mask][i] = –º–∏–Ω. —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ, –ø–æ—Å–µ—Ç–∏–≤ –≥–æ—Ä–æ–¥–∞ –∏–∑ mask, –∑–∞–∫–æ–Ω—á–∏–≤ –≤ i
    
    INF = positive_infinity
    dp = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º (1 << n) √ó n –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω INF
    
    dp[1][0] = 0  # –ù–∞—á–∏–Ω–∞–µ–º –≤ –≥–æ—Ä–æ–¥–µ 0
    
    for mask in 1..(1 << n):
        for i in 0..n-1:
            if dp[mask][i] == INF:
                continue
            
            # –ü—Ä–æ–±—É–µ–º –∏–¥—Ç–∏ –≤ –≥–æ—Ä–æ–¥ j
            for j in 0..n-1:
                if mask & (1 << j) == 0:  # –ì–æ—Ä–æ–¥ j –µ—â—ë –Ω–µ –ø–æ—Å–µ—â–∞–ª–∏
                    new_mask = mask | (1 << j)
                    dp[new_mask][j] = min(dp[new_mask][j], 
                                         dp[mask][i] + dist[i][j])
    
    # –ò—â–µ–º –º–∏–Ω–∏–º—É–º —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ (–∫—Ä–æ–º–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ 0)
    all_visited = (1 << n) - 1
    result = INF
    for i in 1..n-1:
        result = min(result, dp[all_visited][i] + dist[i][0])
    
    return result
```

---

## –ü—Ä–∏–º–µ—Ä 3: –ü–∞–ª–∏–Ω–¥—Ä–æ–º–Ω–∞—è –ø–æ–¥—Å—Ç—Ä–æ–∫–∞ {id: "exmp-3-palindrome-substring"}

### –ó–∞–¥–∞—á–∞ {id: "longest-palindrome-substring"}

–ù–∞–π—Ç–∏ –¥–ª–∏–Ω—É **–Ω–∞–∏–±–æ–ª—å—à–µ–π –ø–∞–ª–∏–Ω–¥—Ä–æ–º–Ω–æ–π –ø–æ–¥—Å—Ç—Ä–æ–∫–∏**.

### –†–µ—à–µ–Ω–∏–µ $O(n^2)$ {id: "longest-palindrome-substring-solution"}

```just-ncv
func longest_palindrome_substring(s: str) -> int32:
    n = len(s)
    if n == 0:
        return 0
    
    # dp[i][j] = true –µ—Å–ª–∏ s[i..j] –ø–∞–ª–∏–Ω–¥—Ä–æ–º
    dp = –º–∞—Å—Å–∏–≤ —Ä–∞–∑–º–µ—Ä–æ–º n √ó n –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω false
    
    max_len = 1
    
    # –î–ª–∏–Ω–∞ 1
    for i in 0..n-1:
        dp[i][i] = true
    
    # –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ –¥–ª–∏–Ω–µ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏
    for len in 2..n:
        for i in 0..n-len:
            j = i + len - 1
            
            if s[i] == s[j]:
                if len == 2:
                    dp[i][j] = true
                else:
                    dp[i][j] = dp[i+1][j-1]
            
            if dp[i][j]:
                max_len = len
    
    return max_len
```

---

# –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ {id: "mistakes"}

## –û—à–∏–±–∫–∞ 1: –ü—Ä–æ—Ö–æ–¥ —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ –≤ 0-1 —Ä—é–∫–∑–∞–∫–µ {id: "err-1-direction"}

### –ü—Ä–æ–±–ª–µ–º–∞ {id: "err-1-direction-point"}

```just-ncv
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (—Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ)
func knapsack_wrong(w, v, W):
    dp = –º–∞—Å—Å–∏–≤(W+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    
    for i in 0..len(w)-1:
        for cap in 0..W:  # ‚Üê –°–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ!
            if w[i] <= cap:
                dp[cap] = max(dp[cap], dp[cap - w[i]] + v[i])
    
    # –ü—Ä–µ–¥–º–µ—Ç –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑!
```

### –ü–æ—á–µ–º—É —ç—Ç–æ –æ—à–∏–±–∫–∞? {id: "err-1-direction-why"}

–°–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ **–æ–¥–∏–Ω –ø—Ä–µ–¥–º–µ—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑**. –ú—ã –æ–±–Ω–æ–≤–ª—è–µ–º `dp[j]` –Ω–∞ –æ—Å–Ω–æ–≤–µ `dp[j-w[i]]`, –∞ –ø–æ—Ç–æ–º –Ω–∞ —Ç–æ–º –∂–µ —à–∞–≥–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ {id: "err-1-direction-fix"}

```just-ncv
# ‚úì –ü–†–ê–í–ò–õ–¨–ù–û (—Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ)
func knapsack_right(w, v, W):
    dp = –º–∞—Å—Å–∏–≤(W+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    
    for i in 0..len(w)-1:
        for cap in W..w[i]-1 step -1:  # ‚Üê –°–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ!
            if w[i] <= cap:
                dp[cap] = max(dp[cap], dp[cap - w[i]] + v[i])
```

---

## –û—à–∏–±–∫–∞ 2: –ó–∞–±—ã–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π {id: "err-2-base-case"}

### –ü—Ä–æ–±–ª–µ–º–∞ {id: "err-2-base-case-point"}

```just-ncv
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
dp = –º–∞—Å—Å–∏–≤(W+1)  # –ù–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!

# –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ {id: "err-2-base-case-fix"}

```just-ncv
# ‚úì –ü–†–ê–í–ò–õ–¨–ù–û
dp = –º–∞—Å—Å–∏–≤(W+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
dp[0] = 0  # –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```

---

## –û—à–∏–±–∫–∞ 3: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –±–∞–∑–æ–≤—ã–π —Å–ª—É—á–∞–π –¥–ª—è –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ —Ä—é–∫–∑–∞–∫–∞ {id: "err-3-unbounded-base-case"}

### –ü—Ä–æ–±–ª–µ–º–∞ {id: "err-3-unbounded-base-case-point"}

```just-ncv
# ‚ùå –û–®–ò–ë–ö–ê: —Å—á–∏—Ç–∞–µ–º –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –∫–∞–∫ 0-1
for i in 0..len(w)-1:
    for cap in W..w[i]-1 step -1:  # ‚Üê –°–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ!
        dp[cap] = max(dp[cap], dp[cap - w[i]] + v[i])
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ {id: "err-4-index-mixup-fix"}

```just-ncv
# ‚úì –ü–†–ê–í–ò–õ–¨–ù–û
for i in 0..len(w)-1:
    for cap in w[i]..W:  # ‚Üê –°–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ!
        dp[cap] = max(dp[cap], dp[cap - w[i]] + v[i])
```

---

## –û—à–∏–±–∫–∞ 4: –°–º–µ—à–∏–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ {id: "err-4-index-mixup"}

### –ü—Ä–æ–±–ª–µ–º–∞ {id: "err-4-index-mixup-point"}

```just-ncv
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –ø—É—Ç–∞–Ω–∏—Ü–∞ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
while i > 0 and j > 0:
    if A[i] == B[j]:  # ‚Üê i-1 –∏ j-1!
        i--; j--
    elif dp[i][j-1] > dp[i-1][j]:
        i--
    else:
        j--
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ {id: "err-4-index-mixup-fix"}

```just-ncv
# ‚úì –ü–†–ê–í–ò–õ–¨–ù–û
while i > 0 and j > 0:
    if A[i-1] == B[j-1]:  # ‚Üê –ò—Å–ø–æ–ª—å–∑—É–µ–º i-1 –∏ j-1!
        result = A[i-1] + result
        i--; j--
    elif dp[i-1][j] > dp[i][j-1]:
        i--
    else:
        j--
```

---

## –û—à–∏–±–∫–∞ 5: –í—ã–±–æ—Ä –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—Ö–æ–¥–∞ {id: "err-5-traversal-direction"}

| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ | –û–±—Ö–æ–¥ | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
|-----------|-------|------------|
| 0-1 —Ä—é–∫–∑–∞–∫ | DP –æ–¥–∏–Ω —Ä–∞–∑ | **–°–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ** |
| –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä—é–∫–∑–∞–∫ | DP –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Å–µ–∫–∞—Ç—å—Å—è | **–°–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ** |
| –ù–û–ü | –¢–∞–±–ª–∏—Ü–∞ 2D | –ü–æ —Å—Ç—Ä–æ–∫–∞–º/—Å—Ç–æ–ª–±—Ü–∞–º |
| –ù–í–ü | –¢–∞–±–ª–∏—Ü–∞ 1D | –°–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ (–ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º) |

---

## –¢–∞–±–ª–∏—Ü–∞ —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ {id: "common-errors-table"}

| –û—à–∏–±–∫–∞ | –ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç | –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å |
|--------|---------|-----------|
| –ü—Ä–æ—Ö–æ–¥ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ | –†—é–∫–∑–∞–∫ | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –±–µ—Ä—ë—Ç—Å—è –ª–∏ –ø—Ä–µ–¥–º–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ |
| –ù–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è DP | –í–µ–∑–¥–µ | `dp[0] = 0` (–∏–ª–∏ –Ω—É–∂–Ω–æ–µ –±–∞–∑–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ) |
| –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ —Å–ª–æ–∂–µ–Ω–∏–∏ | –ü–æ–¥—Å—á—ë—Ç —Å–ø–æ—Å–æ–±–æ–≤ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `long long` –∏–ª–∏ –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫—É |
| –ù–µ–≤–µ—Ä–Ω—ã–π –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç | MIN/MAX DP | 0 –¥–ª—è —Å—É–º–º—ã, INF –¥–ª—è –º–∏–Ω–∏–º—É–º–∞, -INF –¥–ª—è –º–∞–∫—Å–∏–º—É–º–∞ |
| –ó–∞–±—ã–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ | –í–µ–∑–¥–µ | –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ parent –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ DP |

---

# DP –®–ø–∞—Ä–≥–∞–ª–∫–∞: –±—ã—Å—Ç—Ä—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã {id: "cheatsheet"}

> –≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –≤ —Å–ø–µ—à–∫–µ –∏ —Ö–æ—á–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω.

## –®–∞–±–ª–æ–Ω—ã –∫–æ–¥–∞ DP {id: "dp-templates"}

### –®–∞–±–ª–æ–Ω 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ 2D DP (–ø–æ —Å—Ç—Ä–æ–∫–∞–º/—Å—Ç–æ–ª–±—Ü–∞–º) {id: "templ-2-2d-dp"}

```just-ncv
func template_2d_dp(arr1, arr2):
    n = len(arr1)
    m = len(arr2)
    
    dp = –º–∞—Å—Å–∏–≤ (n+1) √ó (m+1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    
    for i in 1..n:
        for j in 1..m:
            if arr1[i-1] == arr2[j-1]:
                dp[i][j] = dp[i-1][j-1] + 1  # –∏–ª–∏ –∫–∞–∫–∞—è-—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è
            else:
                dp[i][j] = max(dp[i-1][j], dp[i][j-1])  # –∏–ª–∏ min
    
    return dp[n][m]
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ù–û–ü, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ–±—â–∞—è –ø–æ–¥—Å—Ç—Ä–æ–∫–∞

### –®–∞–±–ª–æ–Ω 2: 1D DP –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π {id: "templ-2-1d-dp"}

```just-ncv
func template_1d_dp(arr):
    n = len(arr)
    dp = –º–∞—Å—Å–∏–≤ n –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –µ–¥–∏–Ω–∏—Ü–∞–º–∏
    
    for i in 1..n-1:
        for j in 0..i-1:
            if condition(arr[j], arr[i]):
                dp[i] = max(dp[i], dp[j] + 1)
    
    return max_element(dp)
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ù–í–ü, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∞—è –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –®–∞–±–ª–æ–Ω 3: –†—é–∫–∑–∞–∫ (0-1) {id: "templ-3-01-knapsack"}

```just-ncv
func template_knapsack(weights, values, capacity):
    dp = –º–∞—Å—Å–∏–≤ (capacity + 1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    
    for i in 0..len(weights)-1:
        for cap in capacity..weights[i]-1 step -1:  # ‚Üê –°–ü–†–ê–í–ê –ù–ê–õ–ï–í–û!
            dp[cap] = max(dp[cap], dp[cap - weights[i]] + values[i])
    
    return dp[capacity]
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π 0-1 —Ä—é–∫–∑–∞–∫, –≤—ã–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–æ–≤

### –®–∞–±–ª–æ–Ω 4: –†—é–∫–∑–∞–∫ (–Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π) {id: "templ-4-unbounded-knapsack"}

```just-ncv
func template_unbounded_knapsack(weights, values, capacity):
    dp = –º–∞—Å—Å–∏–≤ (capacity + 1) –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω—É–ª—è–º–∏
    
    for cap in 1..capacity:
        for i in 0..len(weights)-1:
            if weights[i] <= cap:
                dp[cap] = max(dp[cap], dp[cap - weights[i]] + values[i])
    
    return dp[capacity]
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ú–æ–Ω–µ—Ç—ã, –∫–æ–Ω—Ñ–µ—Ç—ã, –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

### –®–∞–±–ª–æ–Ω 5: DP –Ω–∞ –¥–µ—Ä–µ–≤—å—è—Ö (DFS) {id: "templ-5-tree-dp"}

```just-ncv
func template_tree_dp(node, parent):
    # dp[node][0] - –Ω–µ –±–µ—Ä—ë–º —É–∑–µ–ª
    # dp[node][1] - –±–µ—Ä—ë–º —É–∑–µ–ª
    
    dp = [0, node.value]
    
    for child in node.children:
        if child == parent:
            continue
        
        child_dp = template_tree_dp(child, node)
        dp[0] += max(child_dp[0], child_dp[1])
        dp[1] += child_dp[0]
    
    return dp
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—É—Ç—å, –∑–∞–¥–∞—á–∏ –Ω–∞ –ø–æ–¥–¥–µ—Ä–µ–≤—å—è—Ö

## –¢–∞–±–ª–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ {id: "algorithm-choice"}

| –ó–∞–¥–∞—á–∞ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ü–æ–¥—Ö–æ–¥ | –õ—É—á—à–µ –≤—Å–µ–≥–æ |
|--------|-----------|--------|------------|
| **–ù–û–ü** | $O(NM)$ | 2D —Ç–∞–±—É–ª—è—Ü–∏—è | –°—Ä–µ–¥–Ω–∏–µ $N, M < 1000$ |
| **–ù–í–ü** | $O(N^2)$ | 1D DP | –ï—Å–ª–∏ $N < 5000$ |
| **–ù–í–ü** | $O(N \log N)$ | –ë–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫ | –ï—Å–ª–∏ $N > 5000$ |
| **0-1 –†—é–∫–∑–∞–∫** | $O(NW)$ | 1D —Ç–∞–±—É–ª—è—Ü–∏—è | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏ |
| **–ù–µ–æ–≥—Ä. –†—é–∫–∑–∞–∫** | $O(NW)$ | 1D —Ç–∞–±—É–ª—è—Ü–∏—è | –ú–æ–Ω–µ—Ç—ã, –º–Ω–æ–≥–æ –∫–æ–ø–∏–π |
| **Edit Distance** | $O(NM)$ | 2D —Ç–∞–±—É–ª—è—Ü–∏—è | –°—Ç—Ä–æ–∫–∏ –ø–æ—Ö–æ–∂–∏ |
| **DP –Ω–∞ –¥–µ—Ä–µ–≤—å—è—Ö** | $O(N)$ | DFS | –ë–∏–Ω–∞—Ä–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è |
| **Bitmask DP** | $O(2^N N^2)$ | –ü–µ—Ä–µ–±–æ—Ä –º–∞—Å–æ–∫ | $N \leq 20$ |

## –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ –∫–∞–∫ –∏—Ö –∏–∑–±–µ–∂–∞—Ç—å {id: "common-mistakes"}

```mermaid
graph TD
    A["üêõ –û—à–∏–±–∫–∞?"] --> B{–ß—Ç–æ —Ç–∏–ø?}
    
    B -->|–†—é–∫–∑–∞–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç| C["‚ùå –ü—Ä–æ–≤–µ—Ä—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ<br/>0-1: —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ ‚Üê<br/>–ù–µ–æ–≥—Ä: —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ ‚Üí"]
    B -->|–û—Ç–≤–µ—Ç 0 –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π| D["‚ùå –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π –±–∞–∑–æ–≤—ã–µ —Å–ª—É—á–∞–∏<br/>dp[0] = –Ω—É–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ"]
    B -->|–ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏| E["‚ùå –ò—Å–ø–æ–ª—å–∑—É–π 1D DP –≤–º–µ—Å—Ç–æ 2D<br/>–ú–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å 2 —Å—Ç—Ä–æ–∫–∏"]
    B -->|–ù–µ–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç| F["‚ùå –ü—Ä–æ–≤–µ—Ä—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é<br/>i-1, j-1 –≤–º–µ—Å—Ç–æ i, j"]
    
    C --> G["‚úÖ –ò—Å–ø—Ä–∞–≤—å –∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–π"]
    D --> G
    E --> G
    F --> G
    
    style A fill:red
    style G fill:lime
```

## –ë—ã—Å—Ç—Ä—ã–µ —Å–æ–≤–µ—Ç—ã –Ω–∞ –∫–æ–Ω–∫—É—Ä—Å–µ {id: "quick-tips"}

1. **–ù–∞—á–Ω–∏ —Å –Ω–∞–∏–≤–Ω–æ–≥–æ** (–¥–∞–∂–µ –µ—Å–ª–∏ –º–µ–¥–ª–µ–Ω–Ω–æ) ‚Äî –ø–æ–π–º—ë—à—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É
2. **–í—ã–≤–µ–¥–∏ 2-3 —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã DP** ‚Äî —á–∞—Å—Ç–æ –≤–∏–¥–Ω–∞ –æ—à–∏–±–∫–∞
3. **–¢–µ—Å—Ç–∏—Ä—É–π –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö –∏–∑ –∑–∞–¥–∞—á–∏** ‚Äî –ª—É—á—à–µ —á–µ–º –Ω–∞ —Å–≤–æ–∏—Ö
4. **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞:** $\text{ans} = (a + b) \% \text{MOD}$
5. **–ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ:** –∏—Å–ø–æ–ª—å–∑—É–π `long long` –¥–ª—è –±–æ–ª—å—à–∏—Ö —á–∏—Å–µ–ª
6. **–ú–µ–º–æ–∏–∑–∞—Ü–∏—è –ø—Ä–æ—â–µ,** –Ω–æ —Ç–∞–±—É–ª—è—Ü–∏—è –±—ã—Å—Ç—Ä–µ–µ ‚Äî –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–∏ —Ç–∞–±—É–ª—è—Ü–∏—è
7. **–ï—Å–ª–∏ –≤—Ä–µ–º—è –∏—Å—Ç–µ–∫–∞–µ—Ç:** —Å–¥–∞–π O(n¬≤) –≤–µ—Ä—Å–∏—é –≤–º–µ—Å—Ç–æ O(n log n)

---

# –°–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ {id: "tips"}

## –°–æ–≤–µ—Ç 1: –í—Å–µ–≥–¥–∞ –Ω–∞—á–Ω–∏—Ç–µ —Å –Ω–∞–∏–≤–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è {id: "tip-1-start-naive"}

```just-ncv
# –°–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–±–æ—Ä (bruteforce)
func solve_bruteforce():
    return try_all_combinations()

# –ü–æ—Ç–æ–º –¥–æ–±–∞–≤—å—Ç–µ –º–µ–º–æ–∏–∑–∞—Ü–∏—é
memo = {}
func solve_memo():
    if state in memo:
        return memo[state]
    # ... —Ä–µ–∫—É—Ä—Å–∏—è ...
    memo[state] = result
    return result

# –ü–æ—Ç–æ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –¥–æ —Ç–∞–±—É–ª—è—Ü–∏–∏
```

---

## –°–æ–≤–µ—Ç 2: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ {id: "tip-2-debug-table"}

–ü—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ DP, –≤—ã–≤–µ–¥–∏—Ç–µ –≤—Å—é —Ç–∞–±–ª–∏—Ü—É:

```just-ncv
# –î–ª—è –ù–û–ü
func print_dp_table(A, B, dp):
    # –í—ã–≤–µ–¥–∏—Ç–µ –≥–æ–ª–æ–≤—ã
    print("   ", end="")
    for j in 0..len(B):
        print(f"{B[j]:3}", end="")
    print()
    
    # –í—ã–≤–µ–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏
    for i in 0..len(A):
        print(f"{A[i]:3}", end="")
        for j in 0..len(B):
            print(f"{dp[i][j]:3}", end="")
        print()
```

---

## –°–æ–≤–µ—Ç 3: –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –º–∞–ª—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö {id: "tip-3-test-small"}

```just-ncv
# –ü—Ä–µ–∂–¥–µ —á–µ–º —Å–¥–∞–≤–∞—Ç—å, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
test_cases = [
    (input1, expected_output1),
    (input2, expected_output2),
]

for input_data, expected in test_cases:
    result = solve(input_data)
    assert result == expected, f"–û—à–∏–±–∫–∞: {result} != {expected}"
```

---

## –°–æ–≤–µ—Ç 4: –ü–æ–º–Ω–∏—Ç–µ –æ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–µ {id: "tip-4-mod-arithmetic"}

```just-ncv
MOD = 10^9 + 7

func solve_with_mod():
    # –ü—Ä–∏ —Å–ª–æ–∂–µ–Ω–∏–∏
    dp[i] = (dp[i-1] + dp[i-2]) % MOD
    
    # –ü—Ä–∏ —É–º–Ω–æ–∂–µ–Ω–∏–∏
    dp[i] = (dp[i] * k) % MOD
```

---

## –°–æ–≤–µ—Ç 5: –ü—Ä–æ—Ñ–∏–ª–∏—Ä—É–π—Ç–µ! $O(n^2)$ –º–æ–∂–µ—Ç –±—ã—Ç—å –±—ã—Å—Ç—Ä–µ–µ $O(n \log n)$ {id: "tip-5-profile"}

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ,  $O(n^2)$ –¥–ª—è –ù–í–ü —á–∞—Å—Ç–æ –±—ã—Å—Ç—Ä–µ–µ $O(n \log n)$ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö $n$:
- $n = 100$: $10^4$ vs $664$ –æ–ø–µ—Ä–∞—Ü–∏–π (–ø—Ä–∏–º–µ—Ä–Ω–æ)
- $n = 1000$: $10^6$ vs $9965$ –æ–ø–µ—Ä–∞—Ü–∏–π

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ $O(n^2)$ –ø—Ä–∏ $n < 5000$, $O(n \log n)$ –ø—Ä–∏ $n > 5000$.

---

# –ó–∞–∫–ª—é—á–µ–Ω–∏–µ {id: "conclusion"}

## –ß—Ç–æ –º—ã —É–∑–Ω–∞–ª–∏? {id: "what-we-learned"}

**–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–µ—à–µ–Ω–∏—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –¥–≤—É—Ö –∫–ª—é—á–µ–≤—ã—Ö –∏–¥–µ—è—Ö:

1. **–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –ø–æ–¥—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** –±–æ–ª—å—à—É—é –ø—Ä–æ–±–ª–µ–º—É —Ä–µ—à–∞–µ–º —á–µ—Ä–µ–∑ –º–∞–ª—ã–µ.
2. **–ú–µ–º–æ–∏–∑–∞—Ü–∏—è:** –∑–∞–ø–æ–º–∏–Ω–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã DP {id: "main-dp-types"}

| –¢–∏–ø | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ü—Ä–∏–º–µ—Ä—ã |
|-----|-----------|---------|
| –ü–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º | $O(n^2)$ ‚Äî $O(n \log n)$ | –ù–û–ü, –ù–í–ü, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è |
| –ü–æ –ø–æ–¥–º–∞—Ç—Ä–∏—Ü–∞–º | $O(n^2 m^2)$ | –†—é–∫–∑–∞–∫, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–æ–¥–º–∞—Ç—Ä–∏—Ü–∞ |
| –ü–æ –¥–µ—Ä–µ–≤—å—è–º | $O(n)$ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—É—Ç—å, –¥–∏–∞–º–µ—Ç—Ä |
| –° –±–∏—Ç–æ–≤—ã–º–∏ –º–∞—Å–∫–∞–º–∏ | $O(2^n \cdot n^2)$ | –ö–æ–º–º–∏–≤–æ—è–∂–µ—Ä –¥–ª—è $n \leq 20$ |

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã {id: "practical-tips"}

1. **–ù–∞—á–Ω–∏—Ç–µ —Å –Ω–∞–∏–≤–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è** ‚Äî —Ä–∞–∑–±–µ—Ä–∏—Ç–µ—Å—å –≤ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω–æ–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–∏.
2. **–î–æ–±–∞–≤—å—Ç–µ –º–µ–º–æ–∏–∑–∞—Ü–∏—é** ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.
3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –¥–æ —Ç–∞–±—É–ª—è—Ü–∏–∏** ‚Äî —ç—Ç–æ —á–∞—Å—Ç–æ –±—ã—Å—Ç—Ä–µ–µ.
4. **–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Ä–æ–¥–∏—Ç–µ–ª–µ–π** ‚Äî —á—Ç–æ–±—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ.
5. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∞ –º–∞–ª—ã—Ö –¥–∞–Ω–Ω—ã—Ö** ‚Äî –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± –Ω–∞–π—Ç–∏ –æ—à–∏–±–∫—É.

### –ö–æ–≥–¥–∞ –≤—ã–±–∏—Ä–∞—Ç—å {id: "when-to-choose"}

- **–ù–û–ü/–ù–í–ü:** —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏, —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è
- **–†—é–∫–∑–∞–∫:** –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö
- **DP –Ω–∞ –¥–µ—Ä–µ–≤—å—è—Ö:** –∑–∞–¥–∞—á–∏ –Ω–∞ –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö
- **–° –º–∞—Å–∫–∞–º–∏:** —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ, –Ω–æ —Ç–æ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –º–∞–ª—ã—Ö $n$

---

## –ï—Å–ª–∏ –≤–∞–º —Ö–æ—á–µ—Ç—Å—è –ø–æ–π—Ç–∏ –¥–∞–ª—å—à–µ {id: "further-learning"}

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ {id: "advanced-techniques"}

1. **Convex Hull Trick** ‚Äî –¥–ª—è DP –Ω–∞ –ª–∏–Ω–µ–π–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö
2. **–ú–∞—Ç—Ä–∏—á–Ω–æ–µ –≤–æ–∑–≤–µ–¥–µ–Ω–∏–µ –≤ —Å—Ç–µ–ø–µ–Ω—å** ‚Äî –¥–ª—è —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã** ‚Äî –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ DP
4. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è** ‚Äî –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
5. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é Flajolet-Martin** ‚Äî –¥–ª—è –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

### –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏ {id: "classic-problems"}

- Longest Common Subsequence (–ù–û–ü)
- Longest Increasing Subsequence (–ù–í–ü)
- Edit Distance (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- 0-1 Knapsack (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Ä—é–∫–∑–∞–∫)
- Coin Change (—Ä–∞–∑–º–µ–Ω –º–æ–Ω–µ—Ç)
- Maximum Subarray Sum (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–æ–¥array)
- House Robber (–≥—Ä–∞–±–∏—Ç–µ–ª—å –∏ –¥–æ–º–∞)
- Climbing Stairs (–ø–æ–¥—ä—ë–º –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ)
- Fibonacci (–∫–ª–∞—Å—Å–∏–∫–∞)
- Traveling Salesman (–∫–æ–º–º–∏–≤–æ—è–∂–µ—Ä)

### –ì–¥–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è {id: "where-to-practice"}

- LeetCode (—Ä–∞–∑–¥–µ–ª Dynamic Programming)
- Codeforces (—Ç—ç–≥ dp)
- AtCoder (—Ä–∞–∑–¥–µ–ª DP)
- HackerRank
- GeeksforGeeks

---

## –ó–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–µ –º—ã—Å–ª–∏ {id: "final-thoughts"}

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –Ω–µ —Å–ª–æ–∂–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –∞ –ø—Ä–æ—Å—Ç–æ **—Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–æ—Å–æ–± –∑–∞–ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –º—ã —É–∂–µ –≤—ã—á–∏—Å–ª–∏–ª–∏**.

–ü–æ–º–Ω–∏—Ç–µ:
- DP = –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–∫—É—Ä—Å–∏—è —Å –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º
- DP —Ä–∞–±–æ—Ç–∞–µ—Ç, –∫–æ–≥–¥–∞ –µ—Å—Ç—å **–ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è –ø–æ–¥–∑–∞–¥–∞—á–∏** –∏ **–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –ø–æ–¥—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
- **Memoization (—Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑)** –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–µ–µ, **Tabulation (—Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö)** —á–∞—Å—Ç–æ –±—ã—Å—Ç—Ä–µ–µ
- –í—Å–µ–≥–¥–∞ **–ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∞ –º–∞–ª—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö** –ø–µ—Ä–µ–¥ —Å–¥–∞—á–µ–π!

–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ! –ù–∞–¥–µ—é—Å—å, —ç—Ç–æ—Ç –∫–æ–Ω—Å–ø–µ–∫—Ç –ø–æ–º–æ–≥ –≤–∞–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ DP. –ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á (–ù–û–ü, —Ä—é–∫–∑–∞–∫), –ø–æ—Ç–æ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–æ–∂–Ω—ã–º (DP –Ω–∞ –¥–µ—Ä–µ–≤—å—è—Ö, —Å –º–∞—Å–∫–∞–º–∏). –ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Äî –ª—É—á—à–∏–π —É—á–∏—Ç–µ–ª—å!

---

$\text{–û—Ç —É—á–µ–Ω–∏–∫–∞ –¥–ª—è —É—á–µ–Ω–∏–∫–æ–≤.}\\ \text{\textcolor{red}{–° –ª—é–±–æ–≤—å—é} –∫ \textcolor{yellow}{–¢-–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é}.}\\ \textcolor{cyan}{–í–∞–¥–∏–º\ –•—Ä–∏—Å—Ç–µ–Ω–∫–æ.}$
